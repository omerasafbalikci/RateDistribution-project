2025-05-07 01:50:22.029 [] [main] INFO  RateHubApplication - [RateHub] Loading configuration from: C:\Users\efsan\Desktop\RateDistribution-project\rate-hub\config\application.yml
2025-05-07 01:50:22.284 [] [main] INFO  RateHubApplication - [RateHub] Configuration loaded successfully.
2025-05-07 01:50:22.288 [] [main] INFO  AppConfigReloader - [AppConfigReloader] Watching config directory: rate-hub\config
2025-05-07 01:50:25.790 [] [main] INFO  RateHubApplication - [RateHub] Hazelcast instance started with cluster name 'fx-rates'
2025-05-07 01:50:25.791 [] [main] INFO  RateHubApplication - [Coordinator] Initializing dependencies...
2025-05-07 01:50:25.835 [] [main] INFO  AbstractConfig - ProducerConfig values: 
	acks = -1
	batch.size = 16384
	bootstrap.servers = [localhost:9092]
	buffer.memory = 33554432
	client.dns.lookup = use_all_dns_ips
	client.id = producer-1
	compression.gzip.level = -1
	compression.lz4.level = 9
	compression.type = none
	compression.zstd.level = 3
	connections.max.idle.ms = 540000
	delivery.timeout.ms = 120000
	enable.idempotence = true
	enable.metrics.push = true
	interceptor.classes = []
	key.serializer = class org.apache.kafka.common.serialization.StringSerializer
	linger.ms = 5
	max.block.ms = 60000
	max.in.flight.requests.per.connection = 5
	max.request.size = 1048576
	metadata.max.age.ms = 300000
	metadata.max.idle.ms = 300000
	metadata.recovery.rebootstrap.trigger.ms = 300000
	metadata.recovery.strategy = rebootstrap
	metric.reporters = [org.apache.kafka.common.metrics.JmxReporter]
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partitioner.adaptive.partitioning.enable = true
	partitioner.availability.timeout.ms = 0
	partitioner.class = null
	partitioner.ignore.keys = false
	receive.buffer.bytes = 32768
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	transaction.timeout.ms = 60000
	transactional.id = null
	value.serializer = class org.apache.kafka.common.serialization.StringSerializer

2025-05-07 01:50:25.877 [] [main] INFO  KafkaMetricsCollector - initializing Kafka metrics collector
2025-05-07 01:50:25.902 [] [main] INFO  KafkaProducer - [Producer clientId=producer-1] Instantiated an idempotent producer.
2025-05-07 01:50:25.952 [] [main] INFO  AppInfoParser - Kafka version: 4.0.0
2025-05-07 01:50:25.953 [] [main] INFO  AppInfoParser - Kafka commitId: 985bc99521dd22bb
2025-05-07 01:50:25.953 [] [main] INFO  AppInfoParser - Kafka startTimeMs: 1746571825950
2025-05-07 01:50:25.955 [] [main] INFO  RateKafkaProducer - [Kafka] Kafka producer initialized with bootstrap servers: localhost:9092
2025-05-07 01:50:25.956 [] [main] DEBUG RateHubApplication - [Coordinator] Kafka producer initialized.
2025-05-07 01:50:25.979 [] [main] DEBUG RateHubApplication - [Coordinator] Mail service initialized.
2025-05-07 01:50:25.994 [] [main] DEBUG RateHubApplication - [Coordinator] Coordinator instance created.
2025-05-07 01:50:26.023 [] [main] DEBUG RateHubApplication - [Coordinator] Token provider initialized.
2025-05-07 01:50:26.024 [] [main] INFO  SubscriberLoader - [SubscriberLoader] Starting subscriber loading process...
2025-05-07 01:50:26.025 [] [main] DEBUG SubscriberLoader - [SubscriberLoader] Processing subscriber config: PF1
2025-05-07 01:50:26.026 [] [main] DEBUG SubscriberLoader - [SubscriberLoader] Instantiating TcpSubscriber for PF1
2025-05-07 01:50:26.028 [] [main] DEBUG TcpSubscriber - [TCP] Subscribing to EURUSD
2025-05-07 01:50:26.028 [] [main] WARN  TcpSubscriber - [TCP] Output stream is null. Command not sent: subscribe|EURUSD
2025-05-07 01:50:26.028 [] [main] DEBUG TcpSubscriber - [TCP] Subscribing to USDTRY
2025-05-07 01:50:26.029 [] [main] WARN  TcpSubscriber - [TCP] Output stream is null. Command not sent: subscribe|USDTRY
2025-05-07 01:50:26.029 [] [main] DEBUG TcpSubscriber - [TCP] Subscribing to GBPUSD
2025-05-07 01:50:26.029 [] [main] WARN  TcpSubscriber - [TCP] Output stream is null. Command not sent: subscribe|GBPUSD
2025-05-07 01:50:26.029 [] [main] DEBUG SubscriberLoader - [SubscriberLoader] Subscribed to rates: [EURUSD, USDTRY, GBPUSD]
2025-05-07 01:50:26.029 [] [main] INFO  SubscriberLoader - [SubscriberLoader] Loaded subscriber: PF1
2025-05-07 01:50:26.029 [] [main] DEBUG SubscriberLoader - [SubscriberLoader] Processing subscriber config: PF2
2025-05-07 01:50:26.030 [] [main] DEBUG SubscriberLoader - [SubscriberLoader] Instantiating RestSubscriber for PF2
2025-05-07 01:50:26.034 [] [main] DEBUG SubscriberLoader - [SubscriberLoader] Subscribed to rates: [EURUSD, USDTRY, GBPUSD]
2025-05-07 01:50:26.034 [] [main] INFO  SubscriberLoader - [SubscriberLoader] Loaded subscriber: PF2
2025-05-07 01:50:26.034 [] [main] INFO  SubscriberLoader - [SubscriberLoader] Loaded 2 subscriber(s) successfully.
2025-05-07 01:50:26.034 [] [main] INFO  RateHubApplication - [Coordinator] Loaded 2 subscriber(s).
2025-05-07 01:50:26.034 [] [main] INFO  Coordinator - [Coordinator] Starting coordinator with 2 subscribers
2025-05-07 01:50:26.036 [] [main] INFO  RateKafkaProducer - [DynamicEngine] Initialized with engine='groovy' file='C:\Users\efsan\Desktop\RateDistribution-project\rate-hub\config\formulas\eurusd.groovy'
2025-05-07 01:50:26.036 [] [main] DEBUG Coordinator - [Coordinator] Evaluator initialized for EURUSD
2025-05-07 01:50:26.036 [] [main] INFO  RateKafkaProducer - [DynamicEngine] Initialized with engine='java' file='C:\Users\efsan\Desktop\RateDistribution-project\rate-hub\config\formulas\usdtry.java'
2025-05-07 01:50:26.036 [] [main] DEBUG Coordinator - [Coordinator] Evaluator initialized for USDTRY
2025-05-07 01:50:26.036 [] [main] INFO  RateKafkaProducer - [DynamicEngine] Initialized with engine='js' file='C:\Users\efsan\Desktop\RateDistribution-project\rate-hub\config\formulas\gbptry.js'
2025-05-07 01:50:26.036 [] [main] DEBUG Coordinator - [Coordinator] Evaluator initialized for GBPTRY
2025-05-07 01:50:26.036 [] [main] INFO  RateKafkaProducer - [DynamicEngine] Initialized with engine='groovy' file='C:\Users\efsan\Desktop\RateDistribution-project\rate-hub\config\formulas\eurtry.groovy'
2025-05-07 01:50:26.036 [] [main] DEBUG Coordinator - [Coordinator] Evaluator initialized for EURTRY
2025-05-07 01:50:26.038 [] [main] INFO  SubSupervisor - [Supervisor] Starting supervisor with 2 subscribers
2025-05-07 01:50:26.039 [] [main] INFO  Coordinator - [Coordinator] Supervisor started
2025-05-07 01:50:26.040 [] [main] INFO  RateHubApplication - [Coordinator] All subscribers connected and processing started.
2025-05-07 01:50:26.040 [] [main] INFO  RateHubApplication - [RateHub] Coordinator initialized and started.
2025-05-07 01:50:26.040 [] [] INFO  Coordinator - [RateListener] ⇢ Connected: PF1
2025-05-07 01:50:26.040 [] [] INFO  RestSubscriber - [RestSubscriber] Connecting to platform: PF2
2025-05-07 01:50:26.040 [] [] INFO  TcpSubscriber - [TCP] Starting TCP subscriber for PF1 at 127.0.0.1:8084
2025-05-07 01:50:26.041 [] [] INFO  Coordinator - [Coordinator] Connected subscriber: PF1
2025-05-07 01:50:26.041 [] [] TRACE RestSubscriber - [RestSubscriber] run() loop started
2025-05-07 01:50:26.041 [] [] INFO  Coordinator - [RateListener] ⇢ Connected: PF2
2025-05-07 01:50:26.042 [] [] DEBUG RestSubscriber - [RestSubscriber] Polling started every 500ms for PF2
2025-05-07 01:50:26.042 [] [] INFO  Coordinator - [Coordinator] Connected subscriber: PF2
2025-05-07 01:50:26.042 [] [pool-4-thread-1] TRACE RestSubscriber - [RestSubscriber] Polling all subscribed rates for PF2
2025-05-07 01:50:26.044 [] [pool-3-thread-1] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:26.045 [] [pool-3-thread-1] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:26.045 [] [pool-3-thread-1] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:26.044 [] [] ERROR Coordinator - [RateListener] Error on PF1:TCP - Connection refused: getsockopt
java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[?:?]
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682) ~[?:?]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:598) ~[?:?]
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[?:?]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[?:?]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[?:?]
	at java.base/java.net.Socket.<init>(Socket.java:555) ~[?:?]
	at java.base/java.net.Socket.<init>(Socket.java:324) ~[?:?]
	at com.ratedistribution.ratehub.subscriber.impl.TcpSubscriber.run(TcpSubscriber.java:88) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.AbstractSubscriber.lambda$connect$0(AbstractSubscriber.java:42) ~[classes/:?]
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:329) ~[?:?]
2025-05-07 01:50:26.055 [] [] WARN  TcpSubscriber - [TCP] Connection failed. Retrying in 1000 ms (attempt #1)
2025-05-07 01:50:26.405 [] [pool-3-thread-1] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:26.406 [] [pool-3-thread-1] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.368Z"}
2025-05-07 01:50:26.406 [] [pool-3-thread-1] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.368Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.368Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:26.407 [] [pool-3-thread-1] TRACE RestSubscriber - [RestSubscriber] Sending request for rate EURUSD to http://localhost:8080/
2025-05-07 01:50:26.407 [] [pool-3-thread-3] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:26.407 [] [pool-3-thread-3] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:26.407 [] [pool-3-thread-3] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:26.418 [] [pool-3-thread-1] ERROR RestSubscriber - [RestSubscriber] Failed to fetch EURUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/EURUSD","timestamp":"2025-05-06T22:50:26.415Z"}
2025-05-07 01:50:26.419 [] [pool-3-thread-1] INFO  Coordinator - [RateListener] Rate status: PF2 - EURUSD [ERROR]
2025-05-07 01:50:26.421 [] [pool-3-thread-3] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:26.421 [] [pool-3-thread-3] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.419Z"}
2025-05-07 01:50:26.421 [] [pool-3-thread-3] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.419Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.419Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:26.421 [] [pool-3-thread-3] TRACE RestSubscriber - [RestSubscriber] Sending request for rate GBPUSD to http://localhost:8080/
2025-05-07 01:50:26.421 [] [pool-3-thread-2] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:26.422 [] [pool-3-thread-2] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:26.422 [] [pool-3-thread-2] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:26.428 [] [pool-3-thread-3] ERROR RestSubscriber - [RestSubscriber] Failed to fetch GBPUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/GBPUSD","timestamp":"2025-05-06T22:50:26.426Z"}
2025-05-07 01:50:26.428 [] [pool-3-thread-3] INFO  Coordinator - [RateListener] Rate status: PF2 - GBPUSD [ERROR]
2025-05-07 01:50:26.435 [] [pool-3-thread-2] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:26.435 [] [pool-3-thread-2] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.433Z"}
2025-05-07 01:50:26.435 [] [pool-3-thread-2] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.433Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.433Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:26.435 [] [pool-3-thread-2] TRACE RestSubscriber - [RestSubscriber] Sending request for rate USDTRY to http://localhost:8080/
2025-05-07 01:50:26.441 [] [pool-3-thread-2] ERROR RestSubscriber - [RestSubscriber] Failed to fetch USDTRY (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/USDTRY","timestamp":"2025-05-06T22:50:26.440Z"}
2025-05-07 01:50:26.441 [] [pool-3-thread-2] INFO  Coordinator - [RateListener] Rate status: PF2 - USDTRY [ERROR]
2025-05-07 01:50:26.477 [] [kafka-producer-network-thread | producer-1] INFO  Metadata - [Producer clientId=producer-1] Cluster ID: R-3K1hhKRvCmYB-3Qd_phw
2025-05-07 01:50:26.493 [] [kafka-producer-network-thread | producer-1] INFO  TransactionManager - [Producer clientId=producer-1] ProducerId set to 0 with epoch 0
2025-05-07 01:50:26.549 [] [pool-4-thread-1] TRACE RestSubscriber - [RestSubscriber] Polling all subscribed rates for PF2
2025-05-07 01:50:26.549 [] [pool-3-thread-5] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:26.550 [] [pool-3-thread-5] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:26.550 [] [pool-3-thread-5] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:26.560 [] [pool-3-thread-5] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:26.560 [] [pool-3-thread-5] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.558Z"}
2025-05-07 01:50:26.560 [] [pool-3-thread-5] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.558Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.558Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:26.560 [] [pool-3-thread-5] TRACE RestSubscriber - [RestSubscriber] Sending request for rate USDTRY to http://localhost:8080/
2025-05-07 01:50:26.560 [] [pool-3-thread-6] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:26.561 [] [pool-3-thread-6] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:26.561 [] [pool-3-thread-6] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:26.565 [] [pool-3-thread-5] ERROR RestSubscriber - [RestSubscriber] Failed to fetch USDTRY (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/USDTRY","timestamp":"2025-05-06T22:50:26.564Z"}
2025-05-07 01:50:26.565 [] [pool-3-thread-5] INFO  Coordinator - [RateListener] Rate status: PF2 - USDTRY [ERROR]
2025-05-07 01:50:26.569 [] [pool-3-thread-6] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:26.569 [] [pool-3-thread-6] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.568Z"}
2025-05-07 01:50:26.569 [] [pool-3-thread-6] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.568Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.568Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:26.570 [] [pool-3-thread-6] TRACE RestSubscriber - [RestSubscriber] Sending request for rate GBPUSD to http://localhost:8080/
2025-05-07 01:50:26.570 [] [pool-3-thread-4] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:26.570 [] [pool-3-thread-4] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:26.570 [] [pool-3-thread-4] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:26.575 [] [pool-3-thread-6] ERROR RestSubscriber - [RestSubscriber] Failed to fetch GBPUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/GBPUSD","timestamp":"2025-05-06T22:50:26.574Z"}
2025-05-07 01:50:26.576 [] [pool-3-thread-6] INFO  Coordinator - [RateListener] Rate status: PF2 - GBPUSD [ERROR]
2025-05-07 01:50:26.579 [] [pool-3-thread-4] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:26.580 [] [pool-3-thread-4] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.578Z"}
2025-05-07 01:50:26.580 [] [pool-3-thread-4] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.578Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:26.578Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:26.581 [] [pool-3-thread-4] TRACE RestSubscriber - [RestSubscriber] Sending request for rate EURUSD to http://localhost:8080/
2025-05-07 01:50:26.586 [] [pool-3-thread-4] ERROR RestSubscriber - [RestSubscriber] Failed to fetch EURUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/EURUSD","timestamp":"2025-05-06T22:50:26.585Z"}
2025-05-07 01:50:26.587 [] [pool-3-thread-4] INFO  Coordinator - [RateListener] Rate status: PF2 - EURUSD [ERROR]
2025-05-07 01:50:27.045 [] [pool-4-thread-1] TRACE RestSubscriber - [RestSubscriber] Polling all subscribed rates for PF2
2025-05-07 01:50:27.045 [] [pool-3-thread-1] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:27.045 [] [pool-3-thread-1] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:27.045 [] [pool-3-thread-1] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:27.057 [] [pool-3-thread-1] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:27.057 [] [pool-3-thread-1] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.055Z"}
2025-05-07 01:50:27.057 [] [pool-3-thread-1] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.055Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.055Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:27.057 [] [pool-3-thread-1] TRACE RestSubscriber - [RestSubscriber] Sending request for rate GBPUSD to http://localhost:8080/
2025-05-07 01:50:27.057 [] [pool-3-thread-7] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:27.058 [] [pool-3-thread-7] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:27.058 [] [pool-3-thread-7] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:27.061 [] [] ERROR Coordinator - [RateListener] Error on PF1:TCP - Connection refused: getsockopt
java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[?:?]
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682) ~[?:?]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:598) ~[?:?]
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[?:?]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[?:?]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[?:?]
	at java.base/java.net.Socket.<init>(Socket.java:555) ~[?:?]
	at java.base/java.net.Socket.<init>(Socket.java:324) ~[?:?]
	at com.ratedistribution.ratehub.subscriber.impl.TcpSubscriber.run(TcpSubscriber.java:88) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.AbstractSubscriber.lambda$connect$0(AbstractSubscriber.java:42) ~[classes/:?]
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:329) ~[?:?]
2025-05-07 01:50:27.062 [] [] WARN  TcpSubscriber - [TCP] Connection failed. Retrying in 2000 ms (attempt #2)
2025-05-07 01:50:27.064 [] [pool-3-thread-1] ERROR RestSubscriber - [RestSubscriber] Failed to fetch GBPUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/GBPUSD","timestamp":"2025-05-06T22:50:27.062Z"}
2025-05-07 01:50:27.065 [] [pool-3-thread-1] INFO  Coordinator - [RateListener] Rate status: PF2 - GBPUSD [ERROR]
2025-05-07 01:50:27.069 [] [pool-3-thread-7] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:27.069 [] [pool-3-thread-7] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.067Z"}
2025-05-07 01:50:27.070 [] [pool-3-thread-7] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.067Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.067Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:27.071 [] [pool-3-thread-7] TRACE RestSubscriber - [RestSubscriber] Sending request for rate EURUSD to http://localhost:8080/
2025-05-07 01:50:27.071 [] [pool-3-thread-8] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:27.071 [] [pool-3-thread-8] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:27.071 [] [pool-3-thread-8] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:27.076 [] [pool-3-thread-7] ERROR RestSubscriber - [RestSubscriber] Failed to fetch EURUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/EURUSD","timestamp":"2025-05-06T22:50:27.074Z"}
2025-05-07 01:50:27.076 [] [pool-3-thread-7] INFO  Coordinator - [RateListener] Rate status: PF2 - EURUSD [ERROR]
2025-05-07 01:50:27.080 [] [pool-3-thread-8] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:27.080 [] [pool-3-thread-8] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.078Z"}
2025-05-07 01:50:27.081 [] [pool-3-thread-8] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.078Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.078Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:27.081 [] [pool-3-thread-8] TRACE RestSubscriber - [RestSubscriber] Sending request for rate USDTRY to http://localhost:8080/
2025-05-07 01:50:27.086 [] [pool-3-thread-8] ERROR RestSubscriber - [RestSubscriber] Failed to fetch USDTRY (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/USDTRY","timestamp":"2025-05-06T22:50:27.084Z"}
2025-05-07 01:50:27.086 [] [pool-3-thread-8] INFO  Coordinator - [RateListener] Rate status: PF2 - USDTRY [ERROR]
2025-05-07 01:50:27.546 [] [pool-4-thread-1] TRACE RestSubscriber - [RestSubscriber] Polling all subscribed rates for PF2
2025-05-07 01:50:27.546 [] [pool-3-thread-3] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:27.546 [] [pool-3-thread-3] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:27.546 [] [pool-3-thread-3] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:27.565 [] [pool-3-thread-3] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:27.565 [] [pool-3-thread-3] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.561Z"}
2025-05-07 01:50:27.565 [] [pool-3-thread-3] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.561Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.561Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:27.566 [] [pool-3-thread-5] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:27.566 [] [pool-3-thread-3] TRACE RestSubscriber - [RestSubscriber] Sending request for rate EURUSD to http://localhost:8080/
2025-05-07 01:50:27.566 [] [pool-3-thread-5] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:27.566 [] [pool-3-thread-5] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:27.573 [] [pool-3-thread-3] ERROR RestSubscriber - [RestSubscriber] Failed to fetch EURUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/EURUSD","timestamp":"2025-05-06T22:50:27.570Z"}
2025-05-07 01:50:27.574 [] [pool-3-thread-3] INFO  Coordinator - [RateListener] Rate status: PF2 - EURUSD [ERROR]
2025-05-07 01:50:27.575 [] [pool-3-thread-5] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:27.576 [] [pool-3-thread-5] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.572Z"}
2025-05-07 01:50:27.576 [] [pool-3-thread-5] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.572Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.572Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:27.576 [] [pool-3-thread-2] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:27.576 [] [pool-3-thread-5] TRACE RestSubscriber - [RestSubscriber] Sending request for rate GBPUSD to http://localhost:8080/
2025-05-07 01:50:27.576 [] [pool-3-thread-2] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:27.576 [] [pool-3-thread-2] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:27.584 [] [pool-3-thread-5] ERROR RestSubscriber - [RestSubscriber] Failed to fetch GBPUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/GBPUSD","timestamp":"2025-05-06T22:50:27.580Z"}
2025-05-07 01:50:27.584 [] [pool-3-thread-5] INFO  Coordinator - [RateListener] Rate status: PF2 - GBPUSD [ERROR]
2025-05-07 01:50:27.586 [] [pool-3-thread-2] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:27.587 [] [pool-3-thread-2] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.582Z"}
2025-05-07 01:50:27.587 [] [pool-3-thread-2] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.582Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:27.582Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:27.587 [] [pool-3-thread-2] TRACE RestSubscriber - [RestSubscriber] Sending request for rate USDTRY to http://localhost:8080/
2025-05-07 01:50:27.594 [] [pool-3-thread-2] ERROR RestSubscriber - [RestSubscriber] Failed to fetch USDTRY (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/USDTRY","timestamp":"2025-05-06T22:50:27.591Z"}
2025-05-07 01:50:27.595 [] [pool-3-thread-2] INFO  Coordinator - [RateListener] Rate status: PF2 - USDTRY [ERROR]
2025-05-07 01:50:28.043 [] [pool-4-thread-1] TRACE RestSubscriber - [RestSubscriber] Polling all subscribed rates for PF2
2025-05-07 01:50:28.043 [] [pool-3-thread-4] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:28.043 [] [pool-3-thread-4] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:28.043 [] [pool-3-thread-4] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:28.051 [] [pool-3-thread-4] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:28.051 [] [pool-3-thread-4] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.048Z"}
2025-05-07 01:50:28.051 [] [pool-3-thread-4] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.048Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.048Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:28.051 [] [pool-3-thread-6] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:28.051 [] [pool-3-thread-4] TRACE RestSubscriber - [RestSubscriber] Sending request for rate USDTRY to http://localhost:8080/
2025-05-07 01:50:28.051 [] [pool-3-thread-6] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:28.052 [] [pool-3-thread-6] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:28.057 [] [pool-3-thread-4] ERROR RestSubscriber - [RestSubscriber] Failed to fetch USDTRY (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/USDTRY","timestamp":"2025-05-06T22:50:28.055Z"}
2025-05-07 01:50:28.057 [] [pool-3-thread-4] INFO  Coordinator - [RateListener] Rate status: PF2 - USDTRY [ERROR]
2025-05-07 01:50:28.058 [] [pool-3-thread-6] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:28.058 [] [pool-3-thread-6] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.056Z"}
2025-05-07 01:50:28.059 [] [pool-3-thread-6] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.056Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.056Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:28.059 [] [pool-3-thread-1] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:28.059 [] [pool-3-thread-6] TRACE RestSubscriber - [RestSubscriber] Sending request for rate EURUSD to http://localhost:8080/
2025-05-07 01:50:28.059 [] [pool-3-thread-1] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:28.059 [] [pool-3-thread-1] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:28.064 [] [pool-3-thread-6] ERROR RestSubscriber - [RestSubscriber] Failed to fetch EURUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/EURUSD","timestamp":"2025-05-06T22:50:28.062Z"}
2025-05-07 01:50:28.064 [] [pool-3-thread-6] INFO  Coordinator - [RateListener] Rate status: PF2 - EURUSD [ERROR]
2025-05-07 01:50:28.065 [] [pool-3-thread-1] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:28.066 [] [pool-3-thread-1] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.063Z"}
2025-05-07 01:50:28.066 [] [pool-3-thread-1] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.063Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.063Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:28.066 [] [pool-3-thread-1] TRACE RestSubscriber - [RestSubscriber] Sending request for rate GBPUSD to http://localhost:8080/
2025-05-07 01:50:28.071 [] [pool-3-thread-1] ERROR RestSubscriber - [RestSubscriber] Failed to fetch GBPUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/GBPUSD","timestamp":"2025-05-06T22:50:28.069Z"}
2025-05-07 01:50:28.071 [] [pool-3-thread-1] INFO  Coordinator - [RateListener] Rate status: PF2 - GBPUSD [ERROR]
2025-05-07 01:50:28.542 [] [pool-4-thread-1] TRACE RestSubscriber - [RestSubscriber] Polling all subscribed rates for PF2
2025-05-07 01:50:28.542 [] [pool-3-thread-7] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:28.542 [] [pool-3-thread-7] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:28.542 [] [pool-3-thread-7] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:28.549 [] [pool-3-thread-7] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:28.549 [] [pool-3-thread-7] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.547Z"}
2025-05-07 01:50:28.549 [] [pool-3-thread-7] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.547Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.547Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:28.550 [] [pool-3-thread-8] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:28.550 [] [pool-3-thread-7] TRACE RestSubscriber - [RestSubscriber] Sending request for rate EURUSD to http://localhost:8080/
2025-05-07 01:50:28.550 [] [pool-3-thread-8] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:28.550 [] [pool-3-thread-8] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:28.554 [] [pool-3-thread-7] ERROR RestSubscriber - [RestSubscriber] Failed to fetch EURUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/EURUSD","timestamp":"2025-05-06T22:50:28.552Z"}
2025-05-07 01:50:28.555 [] [pool-3-thread-7] INFO  Coordinator - [RateListener] Rate status: PF2 - EURUSD [ERROR]
2025-05-07 01:50:28.555 [] [pool-3-thread-8] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:28.555 [] [pool-3-thread-8] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.554Z"}
2025-05-07 01:50:28.556 [] [pool-3-thread-8] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.554Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.554Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:28.556 [] [pool-3-thread-8] TRACE RestSubscriber - [RestSubscriber] Sending request for rate USDTRY to http://localhost:8080/
2025-05-07 01:50:28.556 [] [pool-3-thread-3] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:28.556 [] [pool-3-thread-3] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:28.556 [] [pool-3-thread-3] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:28.561 [] [pool-3-thread-8] ERROR RestSubscriber - [RestSubscriber] Failed to fetch USDTRY (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/USDTRY","timestamp":"2025-05-06T22:50:28.559Z"}
2025-05-07 01:50:28.562 [] [pool-3-thread-8] INFO  Coordinator - [RateListener] Rate status: PF2 - USDTRY [ERROR]
2025-05-07 01:50:28.566 [] [pool-3-thread-3] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:28.566 [] [pool-3-thread-3] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.564Z"}
2025-05-07 01:50:28.566 [] [pool-3-thread-3] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.564Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:28.564Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:28.566 [] [pool-3-thread-3] TRACE RestSubscriber - [RestSubscriber] Sending request for rate GBPUSD to http://localhost:8080/
2025-05-07 01:50:28.571 [] [pool-3-thread-3] ERROR RestSubscriber - [RestSubscriber] Failed to fetch GBPUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/GBPUSD","timestamp":"2025-05-06T22:50:28.569Z"}
2025-05-07 01:50:28.571 [] [pool-3-thread-3] INFO  Coordinator - [RateListener] Rate status: PF2 - GBPUSD [ERROR]
2025-05-07 01:50:29.047 [] [pool-4-thread-1] TRACE RestSubscriber - [RestSubscriber] Polling all subscribed rates for PF2
2025-05-07 01:50:29.047 [] [pool-3-thread-2] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:29.047 [] [pool-3-thread-2] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:29.047 [] [pool-3-thread-2] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:29.059 [] [pool-3-thread-2] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:29.059 [] [pool-3-thread-2] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.056Z"}
2025-05-07 01:50:29.059 [] [pool-3-thread-2] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.056Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.056Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:29.059 [] [pool-3-thread-4] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:29.059 [] [pool-3-thread-2] TRACE RestSubscriber - [RestSubscriber] Sending request for rate USDTRY to http://localhost:8080/
2025-05-07 01:50:29.059 [] [pool-3-thread-4] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:29.060 [] [pool-3-thread-4] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:29.063 [] [] ERROR Coordinator - [RateListener] Error on PF1:TCP - Connection refused: getsockopt
java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[?:?]
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682) ~[?:?]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:598) ~[?:?]
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[?:?]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[?:?]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[?:?]
	at java.base/java.net.Socket.<init>(Socket.java:555) ~[?:?]
	at java.base/java.net.Socket.<init>(Socket.java:324) ~[?:?]
	at com.ratedistribution.ratehub.subscriber.impl.TcpSubscriber.run(TcpSubscriber.java:88) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.AbstractSubscriber.lambda$connect$0(AbstractSubscriber.java:42) ~[classes/:?]
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:329) ~[?:?]
2025-05-07 01:50:29.063 [] [] WARN  TcpSubscriber - [TCP] Connection failed. Retrying in 4000 ms (attempt #3)
2025-05-07 01:50:29.065 [] [pool-3-thread-2] ERROR RestSubscriber - [RestSubscriber] Failed to fetch USDTRY (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/USDTRY","timestamp":"2025-05-06T22:50:29.062Z"}
2025-05-07 01:50:29.065 [] [pool-3-thread-2] INFO  Coordinator - [RateListener] Rate status: PF2 - USDTRY [ERROR]
2025-05-07 01:50:29.070 [] [pool-3-thread-4] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:29.070 [] [pool-3-thread-4] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.067Z"}
2025-05-07 01:50:29.070 [] [pool-3-thread-4] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.067Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.067Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:29.070 [] [pool-3-thread-5] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:29.070 [] [pool-3-thread-4] TRACE RestSubscriber - [RestSubscriber] Sending request for rate GBPUSD to http://localhost:8080/
2025-05-07 01:50:29.070 [] [pool-3-thread-5] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:29.070 [] [pool-3-thread-5] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:29.076 [] [pool-3-thread-4] ERROR RestSubscriber - [RestSubscriber] Failed to fetch GBPUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/GBPUSD","timestamp":"2025-05-06T22:50:29.073Z"}
2025-05-07 01:50:29.076 [] [pool-3-thread-4] INFO  Coordinator - [RateListener] Rate status: PF2 - GBPUSD [ERROR]
2025-05-07 01:50:29.080 [] [pool-3-thread-5] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:29.080 [] [pool-3-thread-5] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.077Z"}
2025-05-07 01:50:29.080 [] [pool-3-thread-5] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.077Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.077Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:29.080 [] [pool-3-thread-5] TRACE RestSubscriber - [RestSubscriber] Sending request for rate EURUSD to http://localhost:8080/
2025-05-07 01:50:29.086 [] [pool-3-thread-5] ERROR RestSubscriber - [RestSubscriber] Failed to fetch EURUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/EURUSD","timestamp":"2025-05-06T22:50:29.083Z"}
2025-05-07 01:50:29.086 [] [pool-3-thread-5] INFO  Coordinator - [RateListener] Rate status: PF2 - EURUSD [ERROR]
2025-05-07 01:50:29.547 [] [pool-4-thread-1] TRACE RestSubscriber - [RestSubscriber] Polling all subscribed rates for PF2
2025-05-07 01:50:29.547 [] [pool-3-thread-6] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:29.547 [] [pool-3-thread-6] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:29.547 [] [pool-3-thread-6] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:29.557 [] [pool-3-thread-6] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:29.557 [] [pool-3-thread-6] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.555Z"}
2025-05-07 01:50:29.557 [] [pool-3-thread-6] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.555Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.555Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:29.558 [] [pool-3-thread-7] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:29.558 [] [pool-3-thread-6] TRACE RestSubscriber - [RestSubscriber] Sending request for rate EURUSD to http://localhost:8080/
2025-05-07 01:50:29.558 [] [pool-3-thread-7] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:29.558 [] [pool-3-thread-7] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:29.562 [] [pool-3-thread-6] ERROR RestSubscriber - [RestSubscriber] Failed to fetch EURUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/EURUSD","timestamp":"2025-05-06T22:50:29.560Z"}
2025-05-07 01:50:29.563 [] [pool-3-thread-6] INFO  Coordinator - [RateListener] Rate status: PF2 - EURUSD [ERROR]
2025-05-07 01:50:29.566 [] [pool-3-thread-7] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:29.566 [] [pool-3-thread-7] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.564Z"}
2025-05-07 01:50:29.566 [] [pool-3-thread-7] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.564Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.564Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:29.567 [] [pool-3-thread-1] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:29.567 [] [pool-3-thread-7] TRACE RestSubscriber - [RestSubscriber] Sending request for rate GBPUSD to http://localhost:8080/
2025-05-07 01:50:29.567 [] [pool-3-thread-1] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:29.567 [] [pool-3-thread-1] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:29.571 [] [pool-3-thread-7] ERROR RestSubscriber - [RestSubscriber] Failed to fetch GBPUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/GBPUSD","timestamp":"2025-05-06T22:50:29.569Z"}
2025-05-07 01:50:29.571 [] [pool-3-thread-7] INFO  Coordinator - [RateListener] Rate status: PF2 - GBPUSD [ERROR]
2025-05-07 01:50:29.574 [] [pool-3-thread-1] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:29.574 [] [pool-3-thread-1] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.572Z"}
2025-05-07 01:50:29.575 [] [pool-3-thread-1] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.572Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:29.572Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:29.575 [] [pool-3-thread-1] TRACE RestSubscriber - [RestSubscriber] Sending request for rate USDTRY to http://localhost:8080/
2025-05-07 01:50:29.579 [] [pool-3-thread-1] ERROR RestSubscriber - [RestSubscriber] Failed to fetch USDTRY (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/USDTRY","timestamp":"2025-05-06T22:50:29.577Z"}
2025-05-07 01:50:29.579 [] [pool-3-thread-1] INFO  Coordinator - [RateListener] Rate status: PF2 - USDTRY [ERROR]
2025-05-07 01:50:30.045 [] [pool-4-thread-1] TRACE RestSubscriber - [RestSubscriber] Polling all subscribed rates for PF2
2025-05-07 01:50:30.045 [] [pool-3-thread-8] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:30.045 [] [pool-3-thread-8] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:30.045 [] [pool-3-thread-8] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:30.056 [] [pool-3-thread-8] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:30.056 [] [pool-3-thread-8] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.053Z"}
2025-05-07 01:50:30.056 [] [pool-3-thread-8] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.053Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.053Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:30.057 [] [pool-3-thread-2] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:30.057 [] [pool-3-thread-8] TRACE RestSubscriber - [RestSubscriber] Sending request for rate EURUSD to http://localhost:8080/
2025-05-07 01:50:30.057 [] [pool-3-thread-2] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:30.057 [] [pool-3-thread-2] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:30.062 [] [pool-3-thread-8] ERROR RestSubscriber - [RestSubscriber] Failed to fetch EURUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/EURUSD","timestamp":"2025-05-06T22:50:30.060Z"}
2025-05-07 01:50:30.062 [] [pool-3-thread-8] INFO  Coordinator - [RateListener] Rate status: PF2 - EURUSD [ERROR]
2025-05-07 01:50:30.066 [] [pool-3-thread-2] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:30.066 [] [pool-3-thread-2] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.064Z"}
2025-05-07 01:50:30.067 [] [pool-3-thread-2] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.064Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.064Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:30.067 [] [pool-3-thread-3] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:30.067 [] [pool-3-thread-2] TRACE RestSubscriber - [RestSubscriber] Sending request for rate GBPUSD to http://localhost:8080/
2025-05-07 01:50:30.067 [] [pool-3-thread-3] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:30.067 [] [pool-3-thread-3] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:30.073 [] [pool-3-thread-2] ERROR RestSubscriber - [RestSubscriber] Failed to fetch GBPUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/GBPUSD","timestamp":"2025-05-06T22:50:30.070Z"}
2025-05-07 01:50:30.073 [] [pool-3-thread-2] INFO  Coordinator - [RateListener] Rate status: PF2 - GBPUSD [ERROR]
2025-05-07 01:50:30.077 [] [pool-3-thread-3] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:30.077 [] [pool-3-thread-3] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.075Z"}
2025-05-07 01:50:30.077 [] [pool-3-thread-3] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.075Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.075Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:30.077 [] [pool-3-thread-3] TRACE RestSubscriber - [RestSubscriber] Sending request for rate USDTRY to http://localhost:8080/
2025-05-07 01:50:30.083 [] [pool-3-thread-3] ERROR RestSubscriber - [RestSubscriber] Failed to fetch USDTRY (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/USDTRY","timestamp":"2025-05-06T22:50:30.080Z"}
2025-05-07 01:50:30.083 [] [pool-3-thread-3] INFO  Coordinator - [RateListener] Rate status: PF2 - USDTRY [ERROR]
2025-05-07 01:50:30.544 [] [pool-4-thread-1] TRACE RestSubscriber - [RestSubscriber] Polling all subscribed rates for PF2
2025-05-07 01:50:30.544 [] [pool-3-thread-5] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:30.544 [] [pool-3-thread-5] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:30.544 [] [pool-3-thread-5] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:30.551 [] [pool-3-thread-5] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:30.551 [] [pool-3-thread-5] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.549Z"}
2025-05-07 01:50:30.551 [] [pool-3-thread-5] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.549Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.549Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:30.552 [] [pool-3-thread-5] TRACE RestSubscriber - [RestSubscriber] Sending request for rate USDTRY to http://localhost:8080/
2025-05-07 01:50:30.551 [] [pool-3-thread-6] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:30.552 [] [pool-3-thread-6] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:30.552 [] [pool-3-thread-6] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:30.557 [] [pool-3-thread-5] ERROR RestSubscriber - [RestSubscriber] Failed to fetch USDTRY (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/USDTRY","timestamp":"2025-05-06T22:50:30.554Z"}
2025-05-07 01:50:30.557 [] [pool-3-thread-5] INFO  Coordinator - [RateListener] Rate status: PF2 - USDTRY [ERROR]
2025-05-07 01:50:30.557 [] [pool-3-thread-6] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:30.558 [] [pool-3-thread-6] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.556Z"}
2025-05-07 01:50:30.558 [] [pool-3-thread-6] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.556Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.556Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:30.558 [] [pool-3-thread-6] TRACE RestSubscriber - [RestSubscriber] Sending request for rate GBPUSD to http://localhost:8080/
2025-05-07 01:50:30.558 [] [pool-3-thread-4] DEBUG TokenProvider - Token expired or near expiration. Refreshing...
2025-05-07 01:50:30.558 [] [pool-3-thread-4] DEBUG TokenProvider - Attempting to refresh token from URL: http://localhost:8080/auth/login
2025-05-07 01:50:30.558 [] [pool-3-thread-4] TRACE TokenProvider - Sending auth request with body: { "username":"omerasafbalikci", "password":"omerasaf18993" }
2025-05-07 01:50:30.562 [] [pool-3-thread-6] ERROR RestSubscriber - [RestSubscriber] Failed to fetch GBPUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/GBPUSD","timestamp":"2025-05-06T22:50:30.560Z"}
2025-05-07 01:50:30.562 [] [pool-3-thread-6] INFO  Coordinator - [RateListener] Rate status: PF2 - GBPUSD [ERROR]
2025-05-07 01:50:30.564 [] [pool-3-thread-4] DEBUG TokenProvider - Auth server responded with status: 503
2025-05-07 01:50:30.564 [] [pool-3-thread-4] ERROR TokenProvider - Authentication failed: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.562Z"}
2025-05-07 01:50:30.564 [] [pool-3-thread-4] ERROR GlobalExceptionHandler - Error in [TokenProvider.refresh [AUTH RESPONSE]] [IllegalStateException]: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.562Z"}
java.lang.IllegalStateException: Auth failed with status 503: {"status":503,"error":"Service Unavailable","message":"Auth service is temporarily unavailable. Please try again later.","path":"/auth/login","timestamp":"2025-05-06T22:50:30.562Z"}
	at com.ratedistribution.ratehub.auth.TokenProvider.refresh(TokenProvider.java:96) ~[classes/:?]
	at com.ratedistribution.ratehub.auth.TokenProvider.get(TokenProvider.java:44) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.fetchRate(RestSubscriber.java:121) ~[classes/:?]
	at com.ratedistribution.ratehub.subscriber.impl.RestSubscriber.lambda$pollAll$0(RestSubscriber.java:93) ~[classes/:?]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.base/java.lang.Thread.run(Thread.java:1583) [?:?]
2025-05-07 01:50:30.564 [] [pool-3-thread-4] TRACE RestSubscriber - [RestSubscriber] Sending request for rate EURUSD to http://localhost:8080/
2025-05-07 01:50:30.568 [] [pool-3-thread-4] ERROR RestSubscriber - [RestSubscriber] Failed to fetch EURUSD (status=400): {"status":400,"error":"Bad Request","message":"Missing or invalid authorization header","path":"/api/rates/EURUSD","timestamp":"2025-05-06T22:50:30.566Z"}
2025-05-07 01:50:30.568 [] [pool-3-thread-4] INFO  Coordinator - [RateListener] Rate status: PF2 - EURUSD [ERROR]
2025-05-07 01:50:30.614 [] [Thread-0] INFO  RateHubApplication - [RateHub] Shutdown signal received. Cleaning up...
2025-05-07 01:50:30.614 [] [Thread-0] INFO  Coordinator - [Coordinator] Shutdown initiated
2025-05-07 01:50:30.614 [] [Thread-0] WARN  Coordinator - [RateListener] ⇠ Disconnected: PF1
2025-05-07 01:50:30.614 [] [Thread-0] DEBUG Coordinator - [Coordinator] Closed subscriber: PF1
