2025-05-07 11:43:59.429 [] [main] TRACE UserServiceImpl - Entering updateCurrentUser method in UserServiceImpl
2025-05-07 11:43:59.444 [] [main] INFO  UserServiceImpl - Updating current user: testUser
2025-05-07 11:43:59.449 [] [main] DEBUG UserServiceImpl - Updated first name for user: com.ratedistribution.usermanagement.entity.User@36ec4071
2025-05-07 11:43:59.449 [] [main] DEBUG UserServiceImpl - Saved updated user: com.ratedistribution.usermanagement.entity.User@36ec4071
2025-05-07 11:43:59.449 [] [main] TRACE UserServiceImpl - Exiting updateCurrentUser method in UserServiceImpl
2025-05-07 11:43:59.484 [] [main] TRACE UserServiceImpl - Entering getAllUsersFilteredAndSorted method in UserServiceImpl
2025-05-07 11:43:59.484 [] [main] INFO  UserServiceImpl - Fetching users with filters: page=0, size=10, sortBy=username, direction=ASC
2025-05-07 11:43:59.490 [] [main] DEBUG UserServiceImpl - Fetched 1 users
2025-05-07 11:43:59.490 [] [main] TRACE UserServiceImpl - Exiting getAllUsersFilteredAndSorted method in UserServiceImpl
2025-05-07 11:43:59.497 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:43:59.497 [] [main] DEBUG UserServiceImpl - Updating user with id: 1
2025-05-07 11:43:59.498 [] [main] ERROR UserServiceImpl - User doesn't exist with id 1
2025-05-07 11:43:59.502 [] [main] TRACE UserServiceImpl - Entering createUser method in UserServiceImpl
2025-05-07 11:43:59.502 [] [main] DEBUG UserServiceImpl - Creating user with username: newUser
2025-05-07 11:43:59.520 [] [main] INFO  UserServiceImpl - Sent create message to RabbitMQ for user: newUser
2025-05-07 11:43:59.520 [] [main] INFO  UserServiceImpl - User created successfully: newUser
2025-05-07 11:43:59.520 [] [main] TRACE UserServiceImpl - Exiting createUser method in UserServiceImpl
2025-05-07 11:43:59.524 [] [main] TRACE UserServiceImpl - Entering getUsernameByEmail method in UserServiceImpl
2025-05-07 11:43:59.525 [] [main] INFO  UserServiceImpl - Fetching username by email: test@example.com
2025-05-07 11:43:59.525 [] [main] DEBUG UserServiceImpl - Found username: testUser
2025-05-07 11:43:59.525 [] [main] TRACE UserServiceImpl - Exiting getUsernameByEmail method in UserServiceImpl
2025-05-07 11:43:59.530 [] [main] TRACE UserServiceImpl - Entering createUser method in UserServiceImpl
2025-05-07 11:43:59.530 [] [main] DEBUG UserServiceImpl - Creating user with username: null
2025-05-07 11:43:59.531 [] [main] ERROR UserServiceImpl - Email 'existingEmail@example.com' is already taken
2025-05-07 11:43:59.537 [] [main] TRACE UserServiceImpl - Entering getUserById method in UserServiceImpl
2025-05-07 11:43:59.537 [] [main] INFO  UserServiceImpl - Fetching user by ID: 1
2025-05-07 11:43:59.538 [] [main] DEBUG UserServiceImpl - Fetched user: GetUserResponse(id=null, firstName=null, lastName=null, username=testUser, hospitalId=null, email=null, roles=null, gender=null)
2025-05-07 11:43:59.541 [] [main] TRACE UserServiceImpl - Exiting getUserById method in UserServiceImpl
2025-05-07 11:43:59.545 [] [main] TRACE UserServiceImpl - Entering getCurrentUser method in UserServiceImpl
2025-05-07 11:43:59.545 [] [main] INFO  UserServiceImpl - Fetching current user by username: testUser
2025-05-07 11:43:59.545 [] [main] DEBUG UserServiceImpl - Fetched current user: GetUserResponse(id=null, firstName=null, lastName=null, username=testUser, hospitalId=null, email=null, roles=null, gender=null)
2025-05-07 11:43:59.545 [] [main] TRACE UserServiceImpl - Exiting getCurrentUser method in UserServiceImpl
2025-05-07 11:43:59.549 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:43:59.549 [] [main] DEBUG UserServiceImpl - Updating user with id: null
2025-05-07 11:43:59.549 [] [main] ERROR UserServiceImpl - Id must not be null
2025-05-07 11:43:59.552 [] [main] TRACE UserServiceImpl - Entering restoreUser method in UserServiceImpl
2025-05-07 11:43:59.552 [] [main] DEBUG UserServiceImpl - Restoring user with id: 1
2025-05-07 11:43:59.553 [] [main] INFO  UserServiceImpl - Sent restore message to RabbitMQ for user: userToRestore
2025-05-07 11:43:59.553 [] [main] INFO  UserServiceImpl - User restored successfully: userToRestore
2025-05-07 11:43:59.553 [] [main] TRACE UserServiceImpl - Exiting restoreUser method in UserServiceImpl
2025-05-07 11:43:59.559 [] [main] TRACE UserServiceImpl - Entering getUserById method in UserServiceImpl
2025-05-07 11:43:59.559 [] [main] INFO  UserServiceImpl - Fetching user by ID: 1
2025-05-07 11:43:59.559 [] [main] ERROR UserServiceImpl - User not found with ID: 1
2025-05-07 11:43:59.563 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:43:59.564 [] [main] DEBUG UserServiceImpl - Updating user with id: 1
2025-05-07 11:43:59.564 [] [main] ERROR UserServiceImpl - Email is already taken newEmail@example.com
2025-05-07 11:43:59.567 [] [main] TRACE UserServiceImpl - Entering removeRole method in UserServiceImpl
2025-05-07 11:43:59.567 [] [main] INFO  UserServiceImpl - Removing role 'ADMIN' from user with id '1'
2025-05-07 11:43:59.569 [] [main] INFO  UserServiceImpl - Successfully sent remove role message for user 'existingUser'
2025-05-07 11:43:59.570 [] [main] INFO  UserServiceImpl - Role 'ADMIN' removed successfully from user 'existingUser'
2025-05-07 11:43:59.570 [] [main] TRACE UserServiceImpl - Exiting removeRole method in UserServiceImpl
2025-05-07 11:43:59.573 [] [main] TRACE UserServiceImpl - Entering addRole method in UserServiceImpl
2025-05-07 11:43:59.574 [] [main] INFO  UserServiceImpl - Adding role 'ADMIN' to user with id '1'
2025-05-07 11:43:59.574 [] [main] ERROR UserServiceImpl - User not found with id '1'
2025-05-07 11:43:59.578 [] [main] TRACE UserServiceImpl - Entering addRole method in UserServiceImpl
2025-05-07 11:43:59.578 [] [main] INFO  UserServiceImpl - Adding role 'ADMIN' to user with id '1'
2025-05-07 11:43:59.578 [] [main] ERROR UserServiceImpl - User 'existingUser' already has this role: 'ADMIN'
2025-05-07 11:43:59.581 [] [main] TRACE UserServiceImpl - Entering removeRole method in UserServiceImpl
2025-05-07 11:43:59.582 [] [main] INFO  UserServiceImpl - Removing role 'ADMIN' from user with id '1'
2025-05-07 11:43:59.582 [] [main] ERROR UserServiceImpl - Cannot remove role. User 'existingUser' must have at least one role
2025-05-07 11:43:59.586 [] [main] TRACE UserServiceImpl - Entering removeRole method in UserServiceImpl
2025-05-07 11:43:59.586 [] [main] INFO  UserServiceImpl - Removing role 'ADMIN' from user with id '1'
2025-05-07 11:43:59.586 [] [main] ERROR UserServiceImpl - User not found with id: '1'
2025-05-07 11:43:59.590 [] [main] TRACE UserServiceImpl - Entering restoreUser method in UserServiceImpl
2025-05-07 11:43:59.590 [] [main] DEBUG UserServiceImpl - Restoring user with id: 1
2025-05-07 11:43:59.590 [] [main] ERROR UserServiceImpl - User does not exist with id 1
2025-05-07 11:43:59.594 [] [main] TRACE UserServiceImpl - Entering getUsernameByEmail method in UserServiceImpl
2025-05-07 11:43:59.594 [] [main] INFO  UserServiceImpl - Fetching username by email: test@example.com
2025-05-07 11:43:59.595 [] [main] ERROR UserServiceImpl - No users registered to this email address: test@example.com
2025-05-07 11:43:59.599 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:43:59.599 [] [main] DEBUG UserServiceImpl - Updating user with id: 1
2025-05-07 11:43:59.599 [] [main] ERROR UserServiceImpl - Username is taken newUsername
2025-05-07 11:43:59.603 [] [main] TRACE UserServiceImpl - Entering deleteUser method in UserServiceImpl
2025-05-07 11:43:59.604 [] [main] DEBUG UserServiceImpl - Deleting user with id: 1
2025-05-07 11:43:59.604 [] [main] ERROR UserServiceImpl - User doesn't exist with id: 1
2025-05-07 11:43:59.609 [] [main] TRACE UserServiceImpl - Entering addRole method in UserServiceImpl
2025-05-07 11:43:59.609 [] [main] INFO  UserServiceImpl - Adding role 'OPERATOR' to user with id '1'
2025-05-07 11:43:59.609 [] [main] INFO  UserServiceImpl - Successfully sent add role message for user 'existingUser'
2025-05-07 11:43:59.609 [] [main] INFO  UserServiceImpl - Role 'OPERATOR' added successfully to user 'existingUser'
2025-05-07 11:43:59.609 [] [main] TRACE UserServiceImpl - Exiting addRole method in UserServiceImpl
2025-05-07 11:43:59.614 [] [main] TRACE UserServiceImpl - Entering deleteUser method in UserServiceImpl
2025-05-07 11:43:59.615 [] [main] DEBUG UserServiceImpl - Deleting user with id: 1
2025-05-07 11:43:59.615 [] [main] INFO  UserServiceImpl - Sent delete message to RabbitMQ for user: userToDelete
2025-05-07 11:43:59.616 [] [main] INFO  UserServiceImpl - User deleted successfully: userToDelete
2025-05-07 11:43:59.616 [] [main] TRACE UserServiceImpl - Exiting deleteUser method in UserServiceImpl
2025-05-07 11:43:59.620 [] [main] TRACE UserServiceImpl - Entering createUser method in UserServiceImpl
2025-05-07 11:43:59.620 [] [main] DEBUG UserServiceImpl - Creating user with username: existingUser
2025-05-07 11:43:59.621 [] [main] ERROR UserServiceImpl - Username 'existingUser' is already taken
2025-05-07 11:43:59.626 [] [main] TRACE UserServiceImpl - Entering updateCurrentUser method in UserServiceImpl
2025-05-07 11:43:59.626 [] [main] INFO  UserServiceImpl - Updating current user: testUser
2025-05-07 11:43:59.626 [] [main] ERROR UserServiceImpl - User doesn't exist with username: testUser
2025-05-07 11:43:59.630 [] [main] TRACE UserServiceImpl - Entering getCurrentUser method in UserServiceImpl
2025-05-07 11:43:59.630 [] [main] INFO  UserServiceImpl - Fetching current user by username: testUser
2025-05-07 11:43:59.630 [] [main] ERROR UserServiceImpl - User not found with username: testUser
2025-05-07 11:43:59.702 [] [main] TRACE UserController - Entering addRole method in UserController class
2025-05-07 11:43:59.702 [] [main] INFO  UserController - Adding role to user with id: 1
2025-05-07 11:43:59.702 [] [main] INFO  UserController - Role added to user with id 1 successfully
2025-05-07 11:43:59.702 [] [main] TRACE UserController - Exiting addRole method in UserController class
2025-05-07 11:43:59.718 [] [main] TRACE UserController - Entering getUsernameByEmail method in UserController class
2025-05-07 11:43:59.719 [] [main] INFO  UserController - Fetching username by email: test@example.com
2025-05-07 11:43:59.719 [] [main] TRACE UserController - Exiting getUsernameByEmail method in UserController class
2025-05-07 11:43:59.721 [] [main] TRACE UserController - Entering getCurrentUser method in UserController class
2025-05-07 11:43:59.721 [] [main] INFO  UserController - Fetching current user by username: testUser
2025-05-07 11:43:59.722 [] [main] INFO  UserController - Current user retrieved successfully
2025-05-07 11:43:59.722 [] [main] TRACE UserController - Exiting getCurrentUser method in UserController class
2025-05-07 11:43:59.725 [] [main] TRACE UserController - Entering updateUser method in UserController class
2025-05-07 11:43:59.725 [] [main] INFO  UserController - Updating user with details: UpdateUserRequest(id=null, firstName=null, lastName=null, username=null, email=null, gender=null)
2025-05-07 11:43:59.727 [] [main] INFO  UserController - User updated successfully
2025-05-07 11:43:59.727 [] [main] TRACE UserController - Exiting updateUser method in UserController class
2025-05-07 11:43:59.730 [] [main] TRACE UserController - Entering restoreUser method in UserController class
2025-05-07 11:43:59.730 [] [main] INFO  UserController - Restoring user with id: 1
2025-05-07 11:43:59.730 [] [main] INFO  UserController - User with id 1 restored successfully
2025-05-07 11:43:59.730 [] [main] TRACE UserController - Exiting restoreUser method in UserController class
2025-05-07 11:43:59.733 [] [main] TRACE UserController - Entering getAllUsersFilteredAndSorted method in UserController class
2025-05-07 11:43:59.734 [] [main] INFO  UserController - Fetching users with filters - page: 0, size: 3, sortBy: id, direction: ASC, firstName: null, lastName: null, username: null, hospitalId: null, email: null, role: null, gender: null, deleted: null
2025-05-07 11:43:59.734 [] [main] INFO  UserController - Users filtered and sorted fetched successfully
2025-05-07 11:43:59.734 [] [main] TRACE UserController - Exiting getAllUsersFilteredAndSorted method in UserController class
2025-05-07 11:43:59.737 [] [main] TRACE UserController - Entering removeRole method in UserController class
2025-05-07 11:43:59.737 [] [main] INFO  UserController - Removing role from user with id: 1
2025-05-07 11:43:59.737 [] [main] INFO  UserController - Role removed from user with id 1 successfully
2025-05-07 11:43:59.738 [] [main] TRACE UserController - Exiting removeRole method in UserController class
2025-05-07 11:43:59.740 [] [main] TRACE UserController - Entering createUser method in UserController class
2025-05-07 11:43:59.740 [] [main] INFO  UserController - Creating a new user with details: CreateUserRequest(firstName=null, lastName=null, username=null, email=null, password=null, roles=null, gender=null)
2025-05-07 11:43:59.742 [] [main] INFO  UserController - User created successfully
2025-05-07 11:43:59.743 [] [main] TRACE UserController - Exiting createUser method in UserController class
2025-05-07 11:43:59.745 [] [main] TRACE UserController - Entering deleteUser method in UserController class
2025-05-07 11:43:59.745 [] [main] INFO  UserController - Deleting user with id: 1
2025-05-07 11:43:59.745 [] [main] INFO  UserController - User with id 1 deleted successfully
2025-05-07 11:43:59.746 [] [main] TRACE UserController - Exiting deleteUser method in UserController class
2025-05-07 11:43:59.749 [] [main] TRACE UserController - Entering getUserById method in UserController class
2025-05-07 11:43:59.750 [] [main] INFO  UserController - Fetching user by id: 1
2025-05-07 11:43:59.750 [] [main] INFO  UserController - User with id 1 retrieved successfully
2025-05-07 11:43:59.750 [] [main] TRACE UserController - Exiting getUserById method in UserController class
2025-05-07 11:43:59.752 [] [main] TRACE UserController - Entering updateCurrentUser method in UserController class
2025-05-07 11:43:59.753 [] [main] INFO  UserController - Updating current user with username: testUser
2025-05-07 11:43:59.753 [] [main] INFO  UserController - Current user updated successfully
2025-05-07 11:43:59.753 [] [main] TRACE UserController - Exiting updateCurrentUser method in UserController class
2025-05-07 11:48:13.774 [] [main] TRACE UserServiceImpl - Entering updateCurrentUser method in UserServiceImpl
2025-05-07 11:48:13.787 [] [main] INFO  UserServiceImpl - Updating current user: testUser
2025-05-07 11:48:13.794 [] [main] DEBUG UserServiceImpl - Updated first name for user: com.ratedistribution.usermanagement.entity.User@36ec4071
2025-05-07 11:48:13.794 [] [main] DEBUG UserServiceImpl - Saved updated user: com.ratedistribution.usermanagement.entity.User@36ec4071
2025-05-07 11:48:13.794 [] [main] TRACE UserServiceImpl - Exiting updateCurrentUser method in UserServiceImpl
2025-05-07 11:48:13.829 [] [main] TRACE UserServiceImpl - Entering getAllUsersFilteredAndSorted method in UserServiceImpl
2025-05-07 11:48:13.829 [] [main] INFO  UserServiceImpl - Fetching users with filters: page=0, size=10, sortBy=username, direction=ASC
2025-05-07 11:48:13.836 [] [main] DEBUG UserServiceImpl - Fetched 1 users
2025-05-07 11:48:13.836 [] [main] TRACE UserServiceImpl - Exiting getAllUsersFilteredAndSorted method in UserServiceImpl
2025-05-07 11:48:13.843 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:48:13.843 [] [main] DEBUG UserServiceImpl - Updating user with id: 1
2025-05-07 11:48:13.844 [] [main] ERROR UserServiceImpl - User doesn't exist with id 1
2025-05-07 11:48:13.849 [] [main] TRACE UserServiceImpl - Entering createUser method in UserServiceImpl
2025-05-07 11:48:13.849 [] [main] DEBUG UserServiceImpl - Creating user with username: newUser
2025-05-07 11:48:13.864 [] [main] INFO  UserServiceImpl - Sent create message to RabbitMQ for user: newUser
2025-05-07 11:48:13.864 [] [main] INFO  UserServiceImpl - User created successfully: newUser
2025-05-07 11:48:13.865 [] [main] TRACE UserServiceImpl - Exiting createUser method in UserServiceImpl
2025-05-07 11:48:13.868 [] [main] TRACE UserServiceImpl - Entering getUsernameByEmail method in UserServiceImpl
2025-05-07 11:48:13.869 [] [main] INFO  UserServiceImpl - Fetching username by email: test@example.com
2025-05-07 11:48:13.869 [] [main] DEBUG UserServiceImpl - Found username: testUser
2025-05-07 11:48:13.869 [] [main] TRACE UserServiceImpl - Exiting getUsernameByEmail method in UserServiceImpl
2025-05-07 11:48:13.873 [] [main] TRACE UserServiceImpl - Entering createUser method in UserServiceImpl
2025-05-07 11:48:13.873 [] [main] DEBUG UserServiceImpl - Creating user with username: null
2025-05-07 11:48:13.874 [] [main] ERROR UserServiceImpl - Email 'existingEmail@example.com' is already taken
2025-05-07 11:48:13.880 [] [main] TRACE UserServiceImpl - Entering getUserById method in UserServiceImpl
2025-05-07 11:48:13.880 [] [main] INFO  UserServiceImpl - Fetching user by ID: 1
2025-05-07 11:48:13.881 [] [main] DEBUG UserServiceImpl - Fetched user: GetUserResponse(id=null, firstName=null, lastName=null, username=testUser, hospitalId=null, email=null, roles=null, gender=null)
2025-05-07 11:48:13.884 [] [main] TRACE UserServiceImpl - Exiting getUserById method in UserServiceImpl
2025-05-07 11:48:13.889 [] [main] TRACE UserServiceImpl - Entering getCurrentUser method in UserServiceImpl
2025-05-07 11:48:13.889 [] [main] INFO  UserServiceImpl - Fetching current user by username: testUser
2025-05-07 11:48:13.890 [] [main] DEBUG UserServiceImpl - Fetched current user: GetUserResponse(id=null, firstName=null, lastName=null, username=testUser, hospitalId=null, email=null, roles=null, gender=null)
2025-05-07 11:48:13.890 [] [main] TRACE UserServiceImpl - Exiting getCurrentUser method in UserServiceImpl
2025-05-07 11:48:13.894 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:48:13.894 [] [main] DEBUG UserServiceImpl - Updating user with id: null
2025-05-07 11:48:13.894 [] [main] ERROR UserServiceImpl - Id must not be null
2025-05-07 11:48:13.897 [] [main] TRACE UserServiceImpl - Entering restoreUser method in UserServiceImpl
2025-05-07 11:48:13.898 [] [main] DEBUG UserServiceImpl - Restoring user with id: 1
2025-05-07 11:48:13.898 [] [main] INFO  UserServiceImpl - Sent restore message to RabbitMQ for user: userToRestore
2025-05-07 11:48:13.899 [] [main] INFO  UserServiceImpl - User restored successfully: userToRestore
2025-05-07 11:48:13.899 [] [main] TRACE UserServiceImpl - Exiting restoreUser method in UserServiceImpl
2025-05-07 11:48:13.905 [] [main] TRACE UserServiceImpl - Entering getUserById method in UserServiceImpl
2025-05-07 11:48:13.905 [] [main] INFO  UserServiceImpl - Fetching user by ID: 1
2025-05-07 11:48:13.905 [] [main] ERROR UserServiceImpl - User not found with ID: 1
2025-05-07 11:48:13.910 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:48:13.911 [] [main] DEBUG UserServiceImpl - Updating user with id: 1
2025-05-07 11:48:13.911 [] [main] ERROR UserServiceImpl - Email is already taken newEmail@example.com
2025-05-07 11:48:13.915 [] [main] TRACE UserServiceImpl - Entering removeRole method in UserServiceImpl
2025-05-07 11:48:13.915 [] [main] INFO  UserServiceImpl - Removing role 'ADMIN' from user with id '1'
2025-05-07 11:48:13.918 [] [main] INFO  UserServiceImpl - Successfully sent remove role message for user 'existingUser'
2025-05-07 11:48:13.918 [] [main] INFO  UserServiceImpl - Role 'ADMIN' removed successfully from user 'existingUser'
2025-05-07 11:48:13.919 [] [main] TRACE UserServiceImpl - Exiting removeRole method in UserServiceImpl
2025-05-07 11:48:13.923 [] [main] TRACE UserServiceImpl - Entering addRole method in UserServiceImpl
2025-05-07 11:48:13.924 [] [main] INFO  UserServiceImpl - Adding role 'ADMIN' to user with id '1'
2025-05-07 11:48:13.925 [] [main] ERROR UserServiceImpl - User not found with id '1'
2025-05-07 11:48:13.930 [] [main] TRACE UserServiceImpl - Entering addRole method in UserServiceImpl
2025-05-07 11:48:13.931 [] [main] INFO  UserServiceImpl - Adding role 'ADMIN' to user with id '1'
2025-05-07 11:48:13.931 [] [main] ERROR UserServiceImpl - User 'existingUser' already has this role: 'ADMIN'
2025-05-07 11:48:13.939 [] [main] TRACE UserServiceImpl - Entering removeRole method in UserServiceImpl
2025-05-07 11:48:13.939 [] [main] INFO  UserServiceImpl - Removing role 'ADMIN' from user with id '1'
2025-05-07 11:48:13.939 [] [main] ERROR UserServiceImpl - Cannot remove role. User 'existingUser' must have at least one role
2025-05-07 11:48:13.944 [] [main] TRACE UserServiceImpl - Entering removeRole method in UserServiceImpl
2025-05-07 11:48:13.944 [] [main] INFO  UserServiceImpl - Removing role 'ADMIN' from user with id '1'
2025-05-07 11:48:13.944 [] [main] ERROR UserServiceImpl - User not found with id: '1'
2025-05-07 11:48:13.948 [] [main] TRACE UserServiceImpl - Entering restoreUser method in UserServiceImpl
2025-05-07 11:48:13.949 [] [main] DEBUG UserServiceImpl - Restoring user with id: 1
2025-05-07 11:48:13.949 [] [main] ERROR UserServiceImpl - User does not exist with id 1
2025-05-07 11:48:13.954 [] [main] TRACE UserServiceImpl - Entering getUsernameByEmail method in UserServiceImpl
2025-05-07 11:48:13.954 [] [main] INFO  UserServiceImpl - Fetching username by email: test@example.com
2025-05-07 11:48:13.955 [] [main] ERROR UserServiceImpl - No users registered to this email address: test@example.com
2025-05-07 11:48:13.960 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:48:13.960 [] [main] DEBUG UserServiceImpl - Updating user with id: 1
2025-05-07 11:48:13.960 [] [main] ERROR UserServiceImpl - Username is taken newUsername
2025-05-07 11:48:13.966 [] [main] TRACE UserServiceImpl - Entering deleteUser method in UserServiceImpl
2025-05-07 11:48:13.966 [] [main] DEBUG UserServiceImpl - Deleting user with id: 1
2025-05-07 11:48:13.967 [] [main] ERROR UserServiceImpl - User doesn't exist with id: 1
2025-05-07 11:48:13.972 [] [main] TRACE UserServiceImpl - Entering addRole method in UserServiceImpl
2025-05-07 11:48:13.972 [] [main] INFO  UserServiceImpl - Adding role 'OPERATOR' to user with id '1'
2025-05-07 11:48:13.972 [] [main] INFO  UserServiceImpl - Successfully sent add role message for user 'existingUser'
2025-05-07 11:48:13.972 [] [main] INFO  UserServiceImpl - Role 'OPERATOR' added successfully to user 'existingUser'
2025-05-07 11:48:13.972 [] [main] TRACE UserServiceImpl - Exiting addRole method in UserServiceImpl
2025-05-07 11:48:13.977 [] [main] TRACE UserServiceImpl - Entering deleteUser method in UserServiceImpl
2025-05-07 11:48:13.977 [] [main] DEBUG UserServiceImpl - Deleting user with id: 1
2025-05-07 11:48:13.978 [] [main] INFO  UserServiceImpl - Sent delete message to RabbitMQ for user: userToDelete
2025-05-07 11:48:13.978 [] [main] INFO  UserServiceImpl - User deleted successfully: userToDelete
2025-05-07 11:48:13.979 [] [main] TRACE UserServiceImpl - Exiting deleteUser method in UserServiceImpl
2025-05-07 11:48:13.983 [] [main] TRACE UserServiceImpl - Entering createUser method in UserServiceImpl
2025-05-07 11:48:13.983 [] [main] DEBUG UserServiceImpl - Creating user with username: existingUser
2025-05-07 11:48:13.983 [] [main] ERROR UserServiceImpl - Username 'existingUser' is already taken
2025-05-07 11:48:13.989 [] [main] TRACE UserServiceImpl - Entering updateCurrentUser method in UserServiceImpl
2025-05-07 11:48:13.989 [] [main] INFO  UserServiceImpl - Updating current user: testUser
2025-05-07 11:48:13.989 [] [main] ERROR UserServiceImpl - User doesn't exist with username: testUser
2025-05-07 11:48:13.994 [] [main] TRACE UserServiceImpl - Entering getCurrentUser method in UserServiceImpl
2025-05-07 11:48:13.994 [] [main] INFO  UserServiceImpl - Fetching current user by username: testUser
2025-05-07 11:48:13.995 [] [main] ERROR UserServiceImpl - User not found with username: testUser
2025-05-07 11:48:14.076 [] [main] TRACE UserController - Entering addRole method in UserController class
2025-05-07 11:48:14.076 [] [main] INFO  UserController - Adding role to user with id: 1
2025-05-07 11:48:14.076 [] [main] INFO  UserController - Role added to user with id 1 successfully
2025-05-07 11:48:14.076 [] [main] TRACE UserController - Exiting addRole method in UserController class
2025-05-07 11:48:14.103 [] [main] TRACE UserController - Entering getUsernameByEmail method in UserController class
2025-05-07 11:48:14.103 [] [main] INFO  UserController - Fetching username by email: test@example.com
2025-05-07 11:48:14.103 [] [main] TRACE UserController - Exiting getUsernameByEmail method in UserController class
2025-05-07 11:48:14.107 [] [main] TRACE UserController - Entering getCurrentUser method in UserController class
2025-05-07 11:48:14.107 [] [main] INFO  UserController - Fetching current user by username: testUser
2025-05-07 11:48:14.107 [] [main] INFO  UserController - Current user retrieved successfully
2025-05-07 11:48:14.108 [] [main] TRACE UserController - Exiting getCurrentUser method in UserController class
2025-05-07 11:48:14.110 [] [main] TRACE UserController - Entering updateUser method in UserController class
2025-05-07 11:48:14.111 [] [main] INFO  UserController - Updating user with details: UpdateUserRequest(id=null, firstName=null, lastName=null, username=null, email=null, gender=null)
2025-05-07 11:48:14.113 [] [main] INFO  UserController - User updated successfully
2025-05-07 11:48:14.113 [] [main] TRACE UserController - Exiting updateUser method in UserController class
2025-05-07 11:48:14.117 [] [main] TRACE UserController - Entering restoreUser method in UserController class
2025-05-07 11:48:14.117 [] [main] INFO  UserController - Restoring user with id: 1
2025-05-07 11:48:14.117 [] [main] INFO  UserController - User with id 1 restored successfully
2025-05-07 11:48:14.118 [] [main] TRACE UserController - Exiting restoreUser method in UserController class
2025-05-07 11:48:14.121 [] [main] TRACE UserController - Entering getAllUsersFilteredAndSorted method in UserController class
2025-05-07 11:48:14.122 [] [main] INFO  UserController - Fetching users with filters - page: 0, size: 3, sortBy: id, direction: ASC, firstName: null, lastName: null, username: null, hospitalId: null, email: null, role: null, gender: null, deleted: null
2025-05-07 11:48:14.123 [] [main] INFO  UserController - Users filtered and sorted fetched successfully
2025-05-07 11:48:14.123 [] [main] TRACE UserController - Exiting getAllUsersFilteredAndSorted method in UserController class
2025-05-07 11:48:14.127 [] [main] TRACE UserController - Entering removeRole method in UserController class
2025-05-07 11:48:14.127 [] [main] INFO  UserController - Removing role from user with id: 1
2025-05-07 11:48:14.128 [] [main] INFO  UserController - Role removed from user with id 1 successfully
2025-05-07 11:48:14.128 [] [main] TRACE UserController - Exiting removeRole method in UserController class
2025-05-07 11:48:14.131 [] [main] TRACE UserController - Entering createUser method in UserController class
2025-05-07 11:48:14.132 [] [main] INFO  UserController - Creating a new user with details: CreateUserRequest(firstName=null, lastName=null, username=null, email=null, password=null, roles=null, gender=null)
2025-05-07 11:48:14.135 [] [main] INFO  UserController - User created successfully
2025-05-07 11:48:14.135 [] [main] TRACE UserController - Exiting createUser method in UserController class
2025-05-07 11:48:14.138 [] [main] TRACE UserController - Entering deleteUser method in UserController class
2025-05-07 11:48:14.138 [] [main] INFO  UserController - Deleting user with id: 1
2025-05-07 11:48:14.138 [] [main] INFO  UserController - User with id 1 deleted successfully
2025-05-07 11:48:14.139 [] [main] TRACE UserController - Exiting deleteUser method in UserController class
2025-05-07 11:48:14.142 [] [main] TRACE UserController - Entering getUserById method in UserController class
2025-05-07 11:48:14.142 [] [main] INFO  UserController - Fetching user by id: 1
2025-05-07 11:48:14.142 [] [main] INFO  UserController - User with id 1 retrieved successfully
2025-05-07 11:48:14.142 [] [main] TRACE UserController - Exiting getUserById method in UserController class
2025-05-07 11:48:14.145 [] [main] TRACE UserController - Entering updateCurrentUser method in UserController class
2025-05-07 11:48:14.146 [] [main] INFO  UserController - Updating current user with username: testUser
2025-05-07 11:48:14.146 [] [main] INFO  UserController - Current user updated successfully
2025-05-07 11:48:14.146 [] [main] TRACE UserController - Exiting updateCurrentUser method in UserController class
2025-05-07 11:54:55.800 [] [main] TRACE UserServiceImpl - Entering updateCurrentUser method in UserServiceImpl
2025-05-07 11:54:55.814 [] [main] INFO  UserServiceImpl - Updating current user: testUser
2025-05-07 11:54:55.819 [] [main] DEBUG UserServiceImpl - Updated first name for user: com.ratedistribution.usermanagement.entity.User@36ec4071
2025-05-07 11:54:55.819 [] [main] DEBUG UserServiceImpl - Saved updated user: com.ratedistribution.usermanagement.entity.User@36ec4071
2025-05-07 11:54:55.819 [] [main] TRACE UserServiceImpl - Exiting updateCurrentUser method in UserServiceImpl
2025-05-07 11:54:55.862 [] [main] TRACE UserServiceImpl - Entering getAllUsersFilteredAndSorted method in UserServiceImpl
2025-05-07 11:54:55.862 [] [main] INFO  UserServiceImpl - Fetching users with filters: page=0, size=10, sortBy=username, direction=ASC
2025-05-07 11:54:55.871 [] [main] DEBUG UserServiceImpl - Fetched 1 users
2025-05-07 11:54:55.871 [] [main] TRACE UserServiceImpl - Exiting getAllUsersFilteredAndSorted method in UserServiceImpl
2025-05-07 11:54:55.878 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:54:55.878 [] [main] DEBUG UserServiceImpl - Updating user with id: 1
2025-05-07 11:54:55.879 [] [main] ERROR UserServiceImpl - User doesn't exist with id 1
2025-05-07 11:54:55.883 [] [main] TRACE UserServiceImpl - Entering createUser method in UserServiceImpl
2025-05-07 11:54:55.883 [] [main] DEBUG UserServiceImpl - Creating user with username: newUser
2025-05-07 11:54:55.896 [] [main] INFO  UserServiceImpl - Sent create message to RabbitMQ for user: newUser
2025-05-07 11:54:55.896 [] [main] INFO  UserServiceImpl - User created successfully: newUser
2025-05-07 11:54:55.896 [] [main] TRACE UserServiceImpl - Exiting createUser method in UserServiceImpl
2025-05-07 11:54:55.900 [] [main] TRACE UserServiceImpl - Entering getUsernameByEmail method in UserServiceImpl
2025-05-07 11:54:55.900 [] [main] INFO  UserServiceImpl - Fetching username by email: test@example.com
2025-05-07 11:54:55.900 [] [main] DEBUG UserServiceImpl - Found username: testUser
2025-05-07 11:54:55.900 [] [main] TRACE UserServiceImpl - Exiting getUsernameByEmail method in UserServiceImpl
2025-05-07 11:54:55.904 [] [main] TRACE UserServiceImpl - Entering createUser method in UserServiceImpl
2025-05-07 11:54:55.904 [] [main] DEBUG UserServiceImpl - Creating user with username: null
2025-05-07 11:54:55.905 [] [main] ERROR UserServiceImpl - Email 'existingEmail@example.com' is already taken
2025-05-07 11:54:55.910 [] [main] TRACE UserServiceImpl - Entering getUserById method in UserServiceImpl
2025-05-07 11:54:55.911 [] [main] INFO  UserServiceImpl - Fetching user by ID: 1
2025-05-07 11:54:55.912 [] [main] DEBUG UserServiceImpl - Fetched user: GetUserResponse(id=null, firstName=null, lastName=null, username=testUser, hospitalId=null, email=null, roles=null, gender=null)
2025-05-07 11:54:55.915 [] [main] TRACE UserServiceImpl - Exiting getUserById method in UserServiceImpl
2025-05-07 11:54:55.921 [] [main] TRACE UserServiceImpl - Entering getCurrentUser method in UserServiceImpl
2025-05-07 11:54:55.921 [] [main] INFO  UserServiceImpl - Fetching current user by username: testUser
2025-05-07 11:54:55.922 [] [main] DEBUG UserServiceImpl - Fetched current user: GetUserResponse(id=null, firstName=null, lastName=null, username=testUser, hospitalId=null, email=null, roles=null, gender=null)
2025-05-07 11:54:55.922 [] [main] TRACE UserServiceImpl - Exiting getCurrentUser method in UserServiceImpl
2025-05-07 11:54:55.926 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:54:55.926 [] [main] DEBUG UserServiceImpl - Updating user with id: null
2025-05-07 11:54:55.926 [] [main] ERROR UserServiceImpl - Id must not be null
2025-05-07 11:54:55.929 [] [main] TRACE UserServiceImpl - Entering restoreUser method in UserServiceImpl
2025-05-07 11:54:55.930 [] [main] DEBUG UserServiceImpl - Restoring user with id: 1
2025-05-07 11:54:55.930 [] [main] INFO  UserServiceImpl - Sent restore message to RabbitMQ for user: userToRestore
2025-05-07 11:54:55.931 [] [main] INFO  UserServiceImpl - User restored successfully: userToRestore
2025-05-07 11:54:55.931 [] [main] TRACE UserServiceImpl - Exiting restoreUser method in UserServiceImpl
2025-05-07 11:54:55.936 [] [main] TRACE UserServiceImpl - Entering getUserById method in UserServiceImpl
2025-05-07 11:54:55.936 [] [main] INFO  UserServiceImpl - Fetching user by ID: 1
2025-05-07 11:54:55.937 [] [main] ERROR UserServiceImpl - User not found with ID: 1
2025-05-07 11:54:55.940 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:54:55.940 [] [main] DEBUG UserServiceImpl - Updating user with id: 1
2025-05-07 11:54:55.941 [] [main] ERROR UserServiceImpl - Email is already taken newEmail@example.com
2025-05-07 11:54:55.945 [] [main] TRACE UserServiceImpl - Entering removeRole method in UserServiceImpl
2025-05-07 11:54:55.945 [] [main] INFO  UserServiceImpl - Removing role 'ADMIN' from user with id '1'
2025-05-07 11:54:55.947 [] [main] INFO  UserServiceImpl - Successfully sent remove role message for user 'existingUser'
2025-05-07 11:54:55.948 [] [main] INFO  UserServiceImpl - Role 'ADMIN' removed successfully from user 'existingUser'
2025-05-07 11:54:55.948 [] [main] TRACE UserServiceImpl - Exiting removeRole method in UserServiceImpl
2025-05-07 11:54:55.952 [] [main] TRACE UserServiceImpl - Entering addRole method in UserServiceImpl
2025-05-07 11:54:55.953 [] [main] INFO  UserServiceImpl - Adding role 'ADMIN' to user with id '1'
2025-05-07 11:54:55.953 [] [main] ERROR UserServiceImpl - User not found with id '1'
2025-05-07 11:54:55.956 [] [main] TRACE UserServiceImpl - Entering addRole method in UserServiceImpl
2025-05-07 11:54:55.956 [] [main] INFO  UserServiceImpl - Adding role 'ADMIN' to user with id '1'
2025-05-07 11:54:55.956 [] [main] ERROR UserServiceImpl - User 'existingUser' already has this role: 'ADMIN'
2025-05-07 11:54:55.960 [] [main] TRACE UserServiceImpl - Entering removeRole method in UserServiceImpl
2025-05-07 11:54:55.960 [] [main] INFO  UserServiceImpl - Removing role 'ADMIN' from user with id '1'
2025-05-07 11:54:55.960 [] [main] ERROR UserServiceImpl - Cannot remove role. User 'existingUser' must have at least one role
2025-05-07 11:54:55.964 [] [main] TRACE UserServiceImpl - Entering removeRole method in UserServiceImpl
2025-05-07 11:54:55.964 [] [main] INFO  UserServiceImpl - Removing role 'ADMIN' from user with id '1'
2025-05-07 11:54:55.964 [] [main] ERROR UserServiceImpl - User not found with id: '1'
2025-05-07 11:54:55.967 [] [main] TRACE UserServiceImpl - Entering restoreUser method in UserServiceImpl
2025-05-07 11:54:55.967 [] [main] DEBUG UserServiceImpl - Restoring user with id: 1
2025-05-07 11:54:55.967 [] [main] ERROR UserServiceImpl - User does not exist with id 1
2025-05-07 11:54:55.971 [] [main] TRACE UserServiceImpl - Entering getUsernameByEmail method in UserServiceImpl
2025-05-07 11:54:55.971 [] [main] INFO  UserServiceImpl - Fetching username by email: test@example.com
2025-05-07 11:54:55.971 [] [main] ERROR UserServiceImpl - No users registered to this email address: test@example.com
2025-05-07 11:54:55.974 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:54:55.974 [] [main] DEBUG UserServiceImpl - Updating user with id: 1
2025-05-07 11:54:55.974 [] [main] ERROR UserServiceImpl - Username is taken newUsername
2025-05-07 11:54:55.978 [] [main] TRACE UserServiceImpl - Entering deleteUser method in UserServiceImpl
2025-05-07 11:54:55.978 [] [main] DEBUG UserServiceImpl - Deleting user with id: 1
2025-05-07 11:54:55.978 [] [main] ERROR UserServiceImpl - User doesn't exist with id: 1
2025-05-07 11:54:55.982 [] [main] TRACE UserServiceImpl - Entering addRole method in UserServiceImpl
2025-05-07 11:54:55.982 [] [main] INFO  UserServiceImpl - Adding role 'OPERATOR' to user with id '1'
2025-05-07 11:54:55.982 [] [main] INFO  UserServiceImpl - Successfully sent add role message for user 'existingUser'
2025-05-07 11:54:55.983 [] [main] INFO  UserServiceImpl - Role 'OPERATOR' added successfully to user 'existingUser'
2025-05-07 11:54:55.983 [] [main] TRACE UserServiceImpl - Exiting addRole method in UserServiceImpl
2025-05-07 11:54:55.987 [] [main] TRACE UserServiceImpl - Entering deleteUser method in UserServiceImpl
2025-05-07 11:54:55.987 [] [main] DEBUG UserServiceImpl - Deleting user with id: 1
2025-05-07 11:54:55.987 [] [main] INFO  UserServiceImpl - Sent delete message to RabbitMQ for user: userToDelete
2025-05-07 11:54:55.988 [] [main] INFO  UserServiceImpl - User deleted successfully: userToDelete
2025-05-07 11:54:55.988 [] [main] TRACE UserServiceImpl - Exiting deleteUser method in UserServiceImpl
2025-05-07 11:54:55.991 [] [main] TRACE UserServiceImpl - Entering createUser method in UserServiceImpl
2025-05-07 11:54:55.991 [] [main] DEBUG UserServiceImpl - Creating user with username: existingUser
2025-05-07 11:54:55.991 [] [main] ERROR UserServiceImpl - Username 'existingUser' is already taken
2025-05-07 11:54:55.995 [] [main] TRACE UserServiceImpl - Entering updateCurrentUser method in UserServiceImpl
2025-05-07 11:54:55.995 [] [main] INFO  UserServiceImpl - Updating current user: testUser
2025-05-07 11:54:55.995 [] [main] ERROR UserServiceImpl - User doesn't exist with username: testUser
2025-05-07 11:54:55.998 [] [main] TRACE UserServiceImpl - Entering getCurrentUser method in UserServiceImpl
2025-05-07 11:54:55.998 [] [main] INFO  UserServiceImpl - Fetching current user by username: testUser
2025-05-07 11:54:55.998 [] [main] ERROR UserServiceImpl - User not found with username: testUser
2025-05-07 11:54:56.067 [] [main] TRACE UserController - Entering addRole method in UserController class
2025-05-07 11:54:56.067 [] [main] INFO  UserController - Adding role to user with id: 1
2025-05-07 11:54:56.068 [] [main] INFO  UserController - Role added to user with id 1 successfully
2025-05-07 11:54:56.068 [] [main] TRACE UserController - Exiting addRole method in UserController class
2025-05-07 11:54:56.088 [] [main] TRACE UserController - Entering getUsernameByEmail method in UserController class
2025-05-07 11:54:56.088 [] [main] INFO  UserController - Fetching username by email: test@example.com
2025-05-07 11:54:56.088 [] [main] TRACE UserController - Exiting getUsernameByEmail method in UserController class
2025-05-07 11:54:56.091 [] [main] TRACE UserController - Entering getCurrentUser method in UserController class
2025-05-07 11:54:56.091 [] [main] INFO  UserController - Fetching current user by username: testUser
2025-05-07 11:54:56.092 [] [main] INFO  UserController - Current user retrieved successfully
2025-05-07 11:54:56.092 [] [main] TRACE UserController - Exiting getCurrentUser method in UserController class
2025-05-07 11:54:56.094 [] [main] TRACE UserController - Entering updateUser method in UserController class
2025-05-07 11:54:56.094 [] [main] INFO  UserController - Updating user with details: UpdateUserRequest(id=null, firstName=null, lastName=null, username=null, email=null, gender=null)
2025-05-07 11:54:56.096 [] [main] INFO  UserController - User updated successfully
2025-05-07 11:54:56.096 [] [main] TRACE UserController - Exiting updateUser method in UserController class
2025-05-07 11:54:56.099 [] [main] TRACE UserController - Entering restoreUser method in UserController class
2025-05-07 11:54:56.099 [] [main] INFO  UserController - Restoring user with id: 1
2025-05-07 11:54:56.099 [] [main] INFO  UserController - User with id 1 restored successfully
2025-05-07 11:54:56.099 [] [main] TRACE UserController - Exiting restoreUser method in UserController class
2025-05-07 11:54:56.103 [] [main] TRACE UserController - Entering getAllUsersFilteredAndSorted method in UserController class
2025-05-07 11:54:56.103 [] [main] INFO  UserController - Fetching users with filters - page: 0, size: 3, sortBy: id, direction: ASC, firstName: null, lastName: null, username: null, hospitalId: null, email: null, role: null, gender: null, deleted: null
2025-05-07 11:54:56.104 [] [main] INFO  UserController - Users filtered and sorted fetched successfully
2025-05-07 11:54:56.104 [] [main] TRACE UserController - Exiting getAllUsersFilteredAndSorted method in UserController class
2025-05-07 11:54:56.108 [] [main] TRACE UserController - Entering removeRole method in UserController class
2025-05-07 11:54:56.108 [] [main] INFO  UserController - Removing role from user with id: 1
2025-05-07 11:54:56.109 [] [main] INFO  UserController - Role removed from user with id 1 successfully
2025-05-07 11:54:56.109 [] [main] TRACE UserController - Exiting removeRole method in UserController class
2025-05-07 11:54:56.113 [] [main] TRACE UserController - Entering createUser method in UserController class
2025-05-07 11:54:56.113 [] [main] INFO  UserController - Creating a new user with details: CreateUserRequest(firstName=null, lastName=null, username=null, email=null, password=null, roles=null, gender=null)
2025-05-07 11:54:56.115 [] [main] INFO  UserController - User created successfully
2025-05-07 11:54:56.115 [] [main] TRACE UserController - Exiting createUser method in UserController class
2025-05-07 11:54:56.118 [] [main] TRACE UserController - Entering deleteUser method in UserController class
2025-05-07 11:54:56.119 [] [main] INFO  UserController - Deleting user with id: 1
2025-05-07 11:54:56.119 [] [main] INFO  UserController - User with id 1 deleted successfully
2025-05-07 11:54:56.119 [] [main] TRACE UserController - Exiting deleteUser method in UserController class
2025-05-07 11:54:56.123 [] [main] TRACE UserController - Entering getUserById method in UserController class
2025-05-07 11:54:56.123 [] [main] INFO  UserController - Fetching user by id: 1
2025-05-07 11:54:56.124 [] [main] INFO  UserController - User with id 1 retrieved successfully
2025-05-07 11:54:56.124 [] [main] TRACE UserController - Exiting getUserById method in UserController class
2025-05-07 11:54:56.126 [] [main] TRACE UserController - Entering updateCurrentUser method in UserController class
2025-05-07 11:54:56.127 [] [main] INFO  UserController - Updating current user with username: testUser
2025-05-07 11:54:56.127 [] [main] INFO  UserController - Current user updated successfully
2025-05-07 11:54:56.127 [] [main] TRACE UserController - Exiting updateCurrentUser method in UserController class
2025-05-07 11:57:08.308 [] [main] TRACE UserServiceImpl - Entering updateCurrentUser method in UserServiceImpl
2025-05-07 11:57:08.320 [] [main] INFO  UserServiceImpl - Updating current user: testUser
2025-05-07 11:57:08.324 [] [main] DEBUG UserServiceImpl - Updated first name for user: com.ratedistribution.usermanagement.entity.User@36ec4071
2025-05-07 11:57:08.325 [] [main] DEBUG UserServiceImpl - Saved updated user: com.ratedistribution.usermanagement.entity.User@36ec4071
2025-05-07 11:57:08.325 [] [main] TRACE UserServiceImpl - Exiting updateCurrentUser method in UserServiceImpl
2025-05-07 11:57:08.364 [] [main] TRACE UserServiceImpl - Entering getAllUsersFilteredAndSorted method in UserServiceImpl
2025-05-07 11:57:08.365 [] [main] INFO  UserServiceImpl - Fetching users with filters: page=0, size=10, sortBy=username, direction=ASC
2025-05-07 11:57:08.371 [] [main] DEBUG UserServiceImpl - Fetched 1 users
2025-05-07 11:57:08.372 [] [main] TRACE UserServiceImpl - Exiting getAllUsersFilteredAndSorted method in UserServiceImpl
2025-05-07 11:57:08.378 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:57:08.378 [] [main] DEBUG UserServiceImpl - Updating user with id: 1
2025-05-07 11:57:08.378 [] [main] ERROR UserServiceImpl - User doesn't exist with id 1
2025-05-07 11:57:08.383 [] [main] TRACE UserServiceImpl - Entering createUser method in UserServiceImpl
2025-05-07 11:57:08.384 [] [main] DEBUG UserServiceImpl - Creating user with username: newUser
2025-05-07 11:57:08.399 [] [main] INFO  UserServiceImpl - Sent create message to RabbitMQ for user: newUser
2025-05-07 11:57:08.400 [] [main] INFO  UserServiceImpl - User created successfully: newUser
2025-05-07 11:57:08.400 [] [main] TRACE UserServiceImpl - Exiting createUser method in UserServiceImpl
2025-05-07 11:57:08.405 [] [main] TRACE UserServiceImpl - Entering getUsernameByEmail method in UserServiceImpl
2025-05-07 11:57:08.405 [] [main] INFO  UserServiceImpl - Fetching username by email: test@example.com
2025-05-07 11:57:08.405 [] [main] DEBUG UserServiceImpl - Found username: testUser
2025-05-07 11:57:08.406 [] [main] TRACE UserServiceImpl - Exiting getUsernameByEmail method in UserServiceImpl
2025-05-07 11:57:08.410 [] [main] TRACE UserServiceImpl - Entering createUser method in UserServiceImpl
2025-05-07 11:57:08.410 [] [main] DEBUG UserServiceImpl - Creating user with username: null
2025-05-07 11:57:08.410 [] [main] ERROR UserServiceImpl - Email 'existingEmail@example.com' is already taken
2025-05-07 11:57:08.415 [] [main] TRACE UserServiceImpl - Entering getUserById method in UserServiceImpl
2025-05-07 11:57:08.416 [] [main] INFO  UserServiceImpl - Fetching user by ID: 1
2025-05-07 11:57:08.416 [] [main] DEBUG UserServiceImpl - Fetched user: GetUserResponse(id=null, firstName=null, lastName=null, username=testUser, hospitalId=null, email=null, roles=null, gender=null)
2025-05-07 11:57:08.420 [] [main] TRACE UserServiceImpl - Exiting getUserById method in UserServiceImpl
2025-05-07 11:57:08.425 [] [main] TRACE UserServiceImpl - Entering getCurrentUser method in UserServiceImpl
2025-05-07 11:57:08.425 [] [main] INFO  UserServiceImpl - Fetching current user by username: testUser
2025-05-07 11:57:08.425 [] [main] DEBUG UserServiceImpl - Fetched current user: GetUserResponse(id=null, firstName=null, lastName=null, username=testUser, hospitalId=null, email=null, roles=null, gender=null)
2025-05-07 11:57:08.426 [] [main] TRACE UserServiceImpl - Exiting getCurrentUser method in UserServiceImpl
2025-05-07 11:57:08.429 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:57:08.429 [] [main] DEBUG UserServiceImpl - Updating user with id: null
2025-05-07 11:57:08.429 [] [main] ERROR UserServiceImpl - Id must not be null
2025-05-07 11:57:08.432 [] [main] TRACE UserServiceImpl - Entering restoreUser method in UserServiceImpl
2025-05-07 11:57:08.433 [] [main] DEBUG UserServiceImpl - Restoring user with id: 1
2025-05-07 11:57:08.433 [] [main] INFO  UserServiceImpl - Sent restore message to RabbitMQ for user: userToRestore
2025-05-07 11:57:08.434 [] [main] INFO  UserServiceImpl - User restored successfully: userToRestore
2025-05-07 11:57:08.434 [] [main] TRACE UserServiceImpl - Exiting restoreUser method in UserServiceImpl
2025-05-07 11:57:08.438 [] [main] TRACE UserServiceImpl - Entering getUserById method in UserServiceImpl
2025-05-07 11:57:08.438 [] [main] INFO  UserServiceImpl - Fetching user by ID: 1
2025-05-07 11:57:08.438 [] [main] ERROR UserServiceImpl - User not found with ID: 1
2025-05-07 11:57:08.443 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:57:08.443 [] [main] DEBUG UserServiceImpl - Updating user with id: 1
2025-05-07 11:57:08.443 [] [main] ERROR UserServiceImpl - Email is already taken newEmail@example.com
2025-05-07 11:57:08.447 [] [main] TRACE UserServiceImpl - Entering removeRole method in UserServiceImpl
2025-05-07 11:57:08.447 [] [main] INFO  UserServiceImpl - Removing role 'ADMIN' from user with id '1'
2025-05-07 11:57:08.449 [] [main] INFO  UserServiceImpl - Successfully sent remove role message for user 'existingUser'
2025-05-07 11:57:08.449 [] [main] INFO  UserServiceImpl - Role 'ADMIN' removed successfully from user 'existingUser'
2025-05-07 11:57:08.449 [] [main] TRACE UserServiceImpl - Exiting removeRole method in UserServiceImpl
2025-05-07 11:57:08.453 [] [main] TRACE UserServiceImpl - Entering addRole method in UserServiceImpl
2025-05-07 11:57:08.453 [] [main] INFO  UserServiceImpl - Adding role 'ADMIN' to user with id '1'
2025-05-07 11:57:08.454 [] [main] ERROR UserServiceImpl - User not found with id '1'
2025-05-07 11:57:08.457 [] [main] TRACE UserServiceImpl - Entering addRole method in UserServiceImpl
2025-05-07 11:57:08.458 [] [main] INFO  UserServiceImpl - Adding role 'ADMIN' to user with id '1'
2025-05-07 11:57:08.458 [] [main] ERROR UserServiceImpl - User 'existingUser' already has this role: 'ADMIN'
2025-05-07 11:57:08.462 [] [main] TRACE UserServiceImpl - Entering removeRole method in UserServiceImpl
2025-05-07 11:57:08.462 [] [main] INFO  UserServiceImpl - Removing role 'ADMIN' from user with id '1'
2025-05-07 11:57:08.462 [] [main] ERROR UserServiceImpl - Cannot remove role. User 'existingUser' must have at least one role
2025-05-07 11:57:08.467 [] [main] TRACE UserServiceImpl - Entering removeRole method in UserServiceImpl
2025-05-07 11:57:08.467 [] [main] INFO  UserServiceImpl - Removing role 'ADMIN' from user with id '1'
2025-05-07 11:57:08.467 [] [main] ERROR UserServiceImpl - User not found with id: '1'
2025-05-07 11:57:08.470 [] [main] TRACE UserServiceImpl - Entering restoreUser method in UserServiceImpl
2025-05-07 11:57:08.470 [] [main] DEBUG UserServiceImpl - Restoring user with id: 1
2025-05-07 11:57:08.471 [] [main] ERROR UserServiceImpl - User does not exist with id 1
2025-05-07 11:57:08.475 [] [main] TRACE UserServiceImpl - Entering getUsernameByEmail method in UserServiceImpl
2025-05-07 11:57:08.475 [] [main] INFO  UserServiceImpl - Fetching username by email: test@example.com
2025-05-07 11:57:08.476 [] [main] ERROR UserServiceImpl - No users registered to this email address: test@example.com
2025-05-07 11:57:08.479 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:57:08.479 [] [main] DEBUG UserServiceImpl - Updating user with id: 1
2025-05-07 11:57:08.480 [] [main] ERROR UserServiceImpl - Username is taken newUsername
2025-05-07 11:57:08.484 [] [main] TRACE UserServiceImpl - Entering deleteUser method in UserServiceImpl
2025-05-07 11:57:08.484 [] [main] DEBUG UserServiceImpl - Deleting user with id: 1
2025-05-07 11:57:08.484 [] [main] ERROR UserServiceImpl - User doesn't exist with id: 1
2025-05-07 11:57:08.489 [] [main] TRACE UserServiceImpl - Entering addRole method in UserServiceImpl
2025-05-07 11:57:08.489 [] [main] INFO  UserServiceImpl - Adding role 'OPERATOR' to user with id '1'
2025-05-07 11:57:08.489 [] [main] INFO  UserServiceImpl - Successfully sent add role message for user 'existingUser'
2025-05-07 11:57:08.490 [] [main] INFO  UserServiceImpl - Role 'OPERATOR' added successfully to user 'existingUser'
2025-05-07 11:57:08.490 [] [main] TRACE UserServiceImpl - Exiting addRole method in UserServiceImpl
2025-05-07 11:57:08.495 [] [main] TRACE UserServiceImpl - Entering deleteUser method in UserServiceImpl
2025-05-07 11:57:08.495 [] [main] DEBUG UserServiceImpl - Deleting user with id: 1
2025-05-07 11:57:08.496 [] [main] INFO  UserServiceImpl - Sent delete message to RabbitMQ for user: userToDelete
2025-05-07 11:57:08.496 [] [main] INFO  UserServiceImpl - User deleted successfully: userToDelete
2025-05-07 11:57:08.496 [] [main] TRACE UserServiceImpl - Exiting deleteUser method in UserServiceImpl
2025-05-07 11:57:08.500 [] [main] TRACE UserServiceImpl - Entering createUser method in UserServiceImpl
2025-05-07 11:57:08.500 [] [main] DEBUG UserServiceImpl - Creating user with username: existingUser
2025-05-07 11:57:08.500 [] [main] ERROR UserServiceImpl - Username 'existingUser' is already taken
2025-05-07 11:57:08.504 [] [main] TRACE UserServiceImpl - Entering updateCurrentUser method in UserServiceImpl
2025-05-07 11:57:08.504 [] [main] INFO  UserServiceImpl - Updating current user: testUser
2025-05-07 11:57:08.505 [] [main] ERROR UserServiceImpl - User doesn't exist with username: testUser
2025-05-07 11:57:08.508 [] [main] TRACE UserServiceImpl - Entering getCurrentUser method in UserServiceImpl
2025-05-07 11:57:08.508 [] [main] INFO  UserServiceImpl - Fetching current user by username: testUser
2025-05-07 11:57:08.509 [] [main] ERROR UserServiceImpl - User not found with username: testUser
2025-05-07 11:57:08.571 [] [main] TRACE UserController - Entering addRole method in UserController class
2025-05-07 11:57:08.571 [] [main] INFO  UserController - Adding role to user with id: 1
2025-05-07 11:57:08.572 [] [main] INFO  UserController - Role added to user with id 1 successfully
2025-05-07 11:57:08.572 [] [main] TRACE UserController - Exiting addRole method in UserController class
2025-05-07 11:57:08.589 [] [main] TRACE UserController - Entering getUsernameByEmail method in UserController class
2025-05-07 11:57:08.589 [] [main] INFO  UserController - Fetching username by email: test@example.com
2025-05-07 11:57:08.589 [] [main] TRACE UserController - Exiting getUsernameByEmail method in UserController class
2025-05-07 11:57:08.592 [] [main] TRACE UserController - Entering getCurrentUser method in UserController class
2025-05-07 11:57:08.592 [] [main] INFO  UserController - Fetching current user by username: testUser
2025-05-07 11:57:08.592 [] [main] INFO  UserController - Current user retrieved successfully
2025-05-07 11:57:08.592 [] [main] TRACE UserController - Exiting getCurrentUser method in UserController class
2025-05-07 11:57:08.594 [] [main] TRACE UserController - Entering updateUser method in UserController class
2025-05-07 11:57:08.595 [] [main] INFO  UserController - Updating user with details: UpdateUserRequest(id=null, firstName=null, lastName=null, username=null, email=null, gender=null)
2025-05-07 11:57:08.596 [] [main] INFO  UserController - User updated successfully
2025-05-07 11:57:08.596 [] [main] TRACE UserController - Exiting updateUser method in UserController class
2025-05-07 11:57:08.599 [] [main] TRACE UserController - Entering restoreUser method in UserController class
2025-05-07 11:57:08.599 [] [main] INFO  UserController - Restoring user with id: 1
2025-05-07 11:57:08.599 [] [main] INFO  UserController - User with id 1 restored successfully
2025-05-07 11:57:08.600 [] [main] TRACE UserController - Exiting restoreUser method in UserController class
2025-05-07 11:57:08.602 [] [main] TRACE UserController - Entering getAllUsersFilteredAndSorted method in UserController class
2025-05-07 11:57:08.603 [] [main] INFO  UserController - Fetching users with filters - page: 0, size: 3, sortBy: id, direction: ASC, firstName: null, lastName: null, username: null, hospitalId: null, email: null, role: null, gender: null, deleted: null
2025-05-07 11:57:08.603 [] [main] INFO  UserController - Users filtered and sorted fetched successfully
2025-05-07 11:57:08.603 [] [main] TRACE UserController - Exiting getAllUsersFilteredAndSorted method in UserController class
2025-05-07 11:57:08.607 [] [main] TRACE UserController - Entering removeRole method in UserController class
2025-05-07 11:57:08.607 [] [main] INFO  UserController - Removing role from user with id: 1
2025-05-07 11:57:08.607 [] [main] INFO  UserController - Role removed from user with id 1 successfully
2025-05-07 11:57:08.607 [] [main] TRACE UserController - Exiting removeRole method in UserController class
2025-05-07 11:57:08.611 [] [main] TRACE UserController - Entering createUser method in UserController class
2025-05-07 11:57:08.611 [] [main] INFO  UserController - Creating a new user with details: CreateUserRequest(firstName=null, lastName=null, username=null, email=null, password=null, roles=null, gender=null)
2025-05-07 11:57:08.614 [] [main] INFO  UserController - User created successfully
2025-05-07 11:57:08.614 [] [main] TRACE UserController - Exiting createUser method in UserController class
2025-05-07 11:57:08.616 [] [main] TRACE UserController - Entering deleteUser method in UserController class
2025-05-07 11:57:08.617 [] [main] INFO  UserController - Deleting user with id: 1
2025-05-07 11:57:08.617 [] [main] INFO  UserController - User with id 1 deleted successfully
2025-05-07 11:57:08.617 [] [main] TRACE UserController - Exiting deleteUser method in UserController class
2025-05-07 11:57:08.620 [] [main] TRACE UserController - Entering getUserById method in UserController class
2025-05-07 11:57:08.620 [] [main] INFO  UserController - Fetching user by id: 1
2025-05-07 11:57:08.621 [] [main] INFO  UserController - User with id 1 retrieved successfully
2025-05-07 11:57:08.621 [] [main] TRACE UserController - Exiting getUserById method in UserController class
2025-05-07 11:57:08.623 [] [main] TRACE UserController - Entering updateCurrentUser method in UserController class
2025-05-07 11:57:08.623 [] [main] INFO  UserController - Updating current user with username: testUser
2025-05-07 11:57:08.623 [] [main] INFO  UserController - Current user updated successfully
2025-05-07 11:57:08.623 [] [main] TRACE UserController - Exiting updateCurrentUser method in UserController class
2025-05-07 11:59:26.843 [] [main] TRACE UserServiceImpl - Entering updateCurrentUser method in UserServiceImpl
2025-05-07 11:59:26.856 [] [main] INFO  UserServiceImpl - Updating current user: testUser
2025-05-07 11:59:26.861 [] [main] DEBUG UserServiceImpl - Updated first name for user: com.ratedistribution.usermanagement.entity.User@36ec4071
2025-05-07 11:59:26.861 [] [main] DEBUG UserServiceImpl - Saved updated user: com.ratedistribution.usermanagement.entity.User@36ec4071
2025-05-07 11:59:26.862 [] [main] TRACE UserServiceImpl - Exiting updateCurrentUser method in UserServiceImpl
2025-05-07 11:59:26.899 [] [main] TRACE UserServiceImpl - Entering getAllUsersFilteredAndSorted method in UserServiceImpl
2025-05-07 11:59:26.900 [] [main] INFO  UserServiceImpl - Fetching users with filters: page=0, size=10, sortBy=username, direction=ASC
2025-05-07 11:59:26.909 [] [main] DEBUG UserServiceImpl - Fetched 1 users
2025-05-07 11:59:26.909 [] [main] TRACE UserServiceImpl - Exiting getAllUsersFilteredAndSorted method in UserServiceImpl
2025-05-07 11:59:26.915 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:59:26.916 [] [main] DEBUG UserServiceImpl - Updating user with id: 1
2025-05-07 11:59:26.916 [] [main] ERROR UserServiceImpl - User doesn't exist with id 1
2025-05-07 11:59:26.921 [] [main] TRACE UserServiceImpl - Entering createUser method in UserServiceImpl
2025-05-07 11:59:26.921 [] [main] DEBUG UserServiceImpl - Creating user with username: newUser
2025-05-07 11:59:26.934 [] [main] INFO  UserServiceImpl - Sent create message to RabbitMQ for user: newUser
2025-05-07 11:59:26.935 [] [main] INFO  UserServiceImpl - User created successfully: newUser
2025-05-07 11:59:26.935 [] [main] TRACE UserServiceImpl - Exiting createUser method in UserServiceImpl
2025-05-07 11:59:26.939 [] [main] TRACE UserServiceImpl - Entering getUsernameByEmail method in UserServiceImpl
2025-05-07 11:59:26.939 [] [main] INFO  UserServiceImpl - Fetching username by email: test@example.com
2025-05-07 11:59:26.939 [] [main] DEBUG UserServiceImpl - Found username: testUser
2025-05-07 11:59:26.939 [] [main] TRACE UserServiceImpl - Exiting getUsernameByEmail method in UserServiceImpl
2025-05-07 11:59:26.943 [] [main] TRACE UserServiceImpl - Entering createUser method in UserServiceImpl
2025-05-07 11:59:26.943 [] [main] DEBUG UserServiceImpl - Creating user with username: null
2025-05-07 11:59:26.944 [] [main] ERROR UserServiceImpl - Email 'existingEmail@example.com' is already taken
2025-05-07 11:59:26.948 [] [main] TRACE UserServiceImpl - Entering getUserById method in UserServiceImpl
2025-05-07 11:59:26.949 [] [main] INFO  UserServiceImpl - Fetching user by ID: 1
2025-05-07 11:59:26.949 [] [main] DEBUG UserServiceImpl - Fetched user: GetUserResponse(id=null, firstName=null, lastName=null, username=testUser, hospitalId=null, email=null, roles=null, gender=null)
2025-05-07 11:59:26.952 [] [main] TRACE UserServiceImpl - Exiting getUserById method in UserServiceImpl
2025-05-07 11:59:26.955 [] [main] TRACE UserServiceImpl - Entering getCurrentUser method in UserServiceImpl
2025-05-07 11:59:26.956 [] [main] INFO  UserServiceImpl - Fetching current user by username: testUser
2025-05-07 11:59:26.956 [] [main] DEBUG UserServiceImpl - Fetched current user: GetUserResponse(id=null, firstName=null, lastName=null, username=testUser, hospitalId=null, email=null, roles=null, gender=null)
2025-05-07 11:59:26.956 [] [main] TRACE UserServiceImpl - Exiting getCurrentUser method in UserServiceImpl
2025-05-07 11:59:26.960 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:59:26.961 [] [main] DEBUG UserServiceImpl - Updating user with id: null
2025-05-07 11:59:26.961 [] [main] ERROR UserServiceImpl - Id must not be null
2025-05-07 11:59:26.964 [] [main] TRACE UserServiceImpl - Entering restoreUser method in UserServiceImpl
2025-05-07 11:59:26.964 [] [main] DEBUG UserServiceImpl - Restoring user with id: 1
2025-05-07 11:59:26.965 [] [main] INFO  UserServiceImpl - Sent restore message to RabbitMQ for user: userToRestore
2025-05-07 11:59:26.965 [] [main] INFO  UserServiceImpl - User restored successfully: userToRestore
2025-05-07 11:59:26.965 [] [main] TRACE UserServiceImpl - Exiting restoreUser method in UserServiceImpl
2025-05-07 11:59:26.969 [] [main] TRACE UserServiceImpl - Entering getUserById method in UserServiceImpl
2025-05-07 11:59:26.969 [] [main] INFO  UserServiceImpl - Fetching user by ID: 1
2025-05-07 11:59:26.970 [] [main] ERROR UserServiceImpl - User not found with ID: 1
2025-05-07 11:59:26.973 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:59:26.973 [] [main] DEBUG UserServiceImpl - Updating user with id: 1
2025-05-07 11:59:26.973 [] [main] ERROR UserServiceImpl - Email is already taken newEmail@example.com
2025-05-07 11:59:26.976 [] [main] TRACE UserServiceImpl - Entering removeRole method in UserServiceImpl
2025-05-07 11:59:26.977 [] [main] INFO  UserServiceImpl - Removing role 'ADMIN' from user with id '1'
2025-05-07 11:59:26.978 [] [main] INFO  UserServiceImpl - Successfully sent remove role message for user 'existingUser'
2025-05-07 11:59:26.979 [] [main] INFO  UserServiceImpl - Role 'ADMIN' removed successfully from user 'existingUser'
2025-05-07 11:59:26.979 [] [main] TRACE UserServiceImpl - Exiting removeRole method in UserServiceImpl
2025-05-07 11:59:26.982 [] [main] TRACE UserServiceImpl - Entering addRole method in UserServiceImpl
2025-05-07 11:59:26.983 [] [main] INFO  UserServiceImpl - Adding role 'ADMIN' to user with id '1'
2025-05-07 11:59:26.983 [] [main] ERROR UserServiceImpl - User not found with id '1'
2025-05-07 11:59:26.986 [] [main] TRACE UserServiceImpl - Entering addRole method in UserServiceImpl
2025-05-07 11:59:26.986 [] [main] INFO  UserServiceImpl - Adding role 'ADMIN' to user with id '1'
2025-05-07 11:59:26.987 [] [main] ERROR UserServiceImpl - User 'existingUser' already has this role: 'ADMIN'
2025-05-07 11:59:26.990 [] [main] TRACE UserServiceImpl - Entering removeRole method in UserServiceImpl
2025-05-07 11:59:26.991 [] [main] INFO  UserServiceImpl - Removing role 'ADMIN' from user with id '1'
2025-05-07 11:59:26.991 [] [main] ERROR UserServiceImpl - Cannot remove role. User 'existingUser' must have at least one role
2025-05-07 11:59:26.994 [] [main] TRACE UserServiceImpl - Entering removeRole method in UserServiceImpl
2025-05-07 11:59:26.994 [] [main] INFO  UserServiceImpl - Removing role 'ADMIN' from user with id '1'
2025-05-07 11:59:26.994 [] [main] ERROR UserServiceImpl - User not found with id: '1'
2025-05-07 11:59:26.997 [] [main] TRACE UserServiceImpl - Entering restoreUser method in UserServiceImpl
2025-05-07 11:59:26.997 [] [main] DEBUG UserServiceImpl - Restoring user with id: 1
2025-05-07 11:59:26.997 [] [main] ERROR UserServiceImpl - User does not exist with id 1
2025-05-07 11:59:27.001 [] [main] TRACE UserServiceImpl - Entering getUsernameByEmail method in UserServiceImpl
2025-05-07 11:59:27.001 [] [main] INFO  UserServiceImpl - Fetching username by email: test@example.com
2025-05-07 11:59:27.001 [] [main] ERROR UserServiceImpl - No users registered to this email address: test@example.com
2025-05-07 11:59:27.005 [] [main] TRACE UserServiceImpl - Entering updateUser method in UserServiceImpl
2025-05-07 11:59:27.005 [] [main] DEBUG UserServiceImpl - Updating user with id: 1
2025-05-07 11:59:27.006 [] [main] ERROR UserServiceImpl - Username is taken newUsername
2025-05-07 11:59:27.009 [] [main] TRACE UserServiceImpl - Entering deleteUser method in UserServiceImpl
2025-05-07 11:59:27.009 [] [main] DEBUG UserServiceImpl - Deleting user with id: 1
2025-05-07 11:59:27.009 [] [main] ERROR UserServiceImpl - User doesn't exist with id: 1
2025-05-07 11:59:27.012 [] [main] TRACE UserServiceImpl - Entering addRole method in UserServiceImpl
2025-05-07 11:59:27.013 [] [main] INFO  UserServiceImpl - Adding role 'OPERATOR' to user with id '1'
2025-05-07 11:59:27.013 [] [main] INFO  UserServiceImpl - Successfully sent add role message for user 'existingUser'
2025-05-07 11:59:27.013 [] [main] INFO  UserServiceImpl - Role 'OPERATOR' added successfully to user 'existingUser'
2025-05-07 11:59:27.013 [] [main] TRACE UserServiceImpl - Exiting addRole method in UserServiceImpl
2025-05-07 11:59:27.017 [] [main] TRACE UserServiceImpl - Entering deleteUser method in UserServiceImpl
2025-05-07 11:59:27.017 [] [main] DEBUG UserServiceImpl - Deleting user with id: 1
2025-05-07 11:59:27.017 [] [main] INFO  UserServiceImpl - Sent delete message to RabbitMQ for user: userToDelete
2025-05-07 11:59:27.018 [] [main] INFO  UserServiceImpl - User deleted successfully: userToDelete
2025-05-07 11:59:27.018 [] [main] TRACE UserServiceImpl - Exiting deleteUser method in UserServiceImpl
2025-05-07 11:59:27.020 [] [main] TRACE UserServiceImpl - Entering createUser method in UserServiceImpl
2025-05-07 11:59:27.021 [] [main] DEBUG UserServiceImpl - Creating user with username: existingUser
2025-05-07 11:59:27.021 [] [main] ERROR UserServiceImpl - Username 'existingUser' is already taken
2025-05-07 11:59:27.025 [] [main] TRACE UserServiceImpl - Entering updateCurrentUser method in UserServiceImpl
2025-05-07 11:59:27.025 [] [main] INFO  UserServiceImpl - Updating current user: testUser
2025-05-07 11:59:27.025 [] [main] ERROR UserServiceImpl - User doesn't exist with username: testUser
2025-05-07 11:59:27.028 [] [main] TRACE UserServiceImpl - Entering getCurrentUser method in UserServiceImpl
2025-05-07 11:59:27.028 [] [main] INFO  UserServiceImpl - Fetching current user by username: testUser
2025-05-07 11:59:27.028 [] [main] ERROR UserServiceImpl - User not found with username: testUser
2025-05-07 11:59:27.090 [] [main] TRACE UserController - Entering addRole method in UserController class
2025-05-07 11:59:27.090 [] [main] INFO  UserController - Adding role to user with id: 1
2025-05-07 11:59:27.090 [] [main] INFO  UserController - Role added to user with id 1 successfully
2025-05-07 11:59:27.091 [] [main] TRACE UserController - Exiting addRole method in UserController class
2025-05-07 11:59:27.111 [] [main] TRACE UserController - Entering getUsernameByEmail method in UserController class
2025-05-07 11:59:27.111 [] [main] INFO  UserController - Fetching username by email: test@example.com
2025-05-07 11:59:27.111 [] [main] TRACE UserController - Exiting getUsernameByEmail method in UserController class
2025-05-07 11:59:27.114 [] [main] TRACE UserController - Entering getCurrentUser method in UserController class
2025-05-07 11:59:27.114 [] [main] INFO  UserController - Fetching current user by username: testUser
2025-05-07 11:59:27.114 [] [main] INFO  UserController - Current user retrieved successfully
2025-05-07 11:59:27.114 [] [main] TRACE UserController - Exiting getCurrentUser method in UserController class
2025-05-07 11:59:27.116 [] [main] TRACE UserController - Entering updateUser method in UserController class
2025-05-07 11:59:27.116 [] [main] INFO  UserController - Updating user with details: UpdateUserRequest(id=null, firstName=null, lastName=null, username=null, email=null, gender=null)
2025-05-07 11:59:27.118 [] [main] INFO  UserController - User updated successfully
2025-05-07 11:59:27.118 [] [main] TRACE UserController - Exiting updateUser method in UserController class
2025-05-07 11:59:27.121 [] [main] TRACE UserController - Entering restoreUser method in UserController class
2025-05-07 11:59:27.121 [] [main] INFO  UserController - Restoring user with id: 1
2025-05-07 11:59:27.121 [] [main] INFO  UserController - User with id 1 restored successfully
2025-05-07 11:59:27.122 [] [main] TRACE UserController - Exiting restoreUser method in UserController class
2025-05-07 11:59:27.124 [] [main] TRACE UserController - Entering getAllUsersFilteredAndSorted method in UserController class
2025-05-07 11:59:27.124 [] [main] INFO  UserController - Fetching users with filters - page: 0, size: 3, sortBy: id, direction: ASC, firstName: null, lastName: null, username: null, hospitalId: null, email: null, role: null, gender: null, deleted: null
2025-05-07 11:59:27.125 [] [main] INFO  UserController - Users filtered and sorted fetched successfully
2025-05-07 11:59:27.125 [] [main] TRACE UserController - Exiting getAllUsersFilteredAndSorted method in UserController class
2025-05-07 11:59:27.128 [] [main] TRACE UserController - Entering removeRole method in UserController class
2025-05-07 11:59:27.128 [] [main] INFO  UserController - Removing role from user with id: 1
2025-05-07 11:59:27.128 [] [main] INFO  UserController - Role removed from user with id 1 successfully
2025-05-07 11:59:27.128 [] [main] TRACE UserController - Exiting removeRole method in UserController class
2025-05-07 11:59:27.130 [] [main] TRACE UserController - Entering createUser method in UserController class
2025-05-07 11:59:27.131 [] [main] INFO  UserController - Creating a new user with details: CreateUserRequest(firstName=null, lastName=null, username=null, email=null, password=null, roles=null, gender=null)
2025-05-07 11:59:27.133 [] [main] INFO  UserController - User created successfully
2025-05-07 11:59:27.133 [] [main] TRACE UserController - Exiting createUser method in UserController class
2025-05-07 11:59:27.135 [] [main] TRACE UserController - Entering deleteUser method in UserController class
2025-05-07 11:59:27.136 [] [main] INFO  UserController - Deleting user with id: 1
2025-05-07 11:59:27.136 [] [main] INFO  UserController - User with id 1 deleted successfully
2025-05-07 11:59:27.136 [] [main] TRACE UserController - Exiting deleteUser method in UserController class
2025-05-07 11:59:27.139 [] [main] TRACE UserController - Entering getUserById method in UserController class
2025-05-07 11:59:27.139 [] [main] INFO  UserController - Fetching user by id: 1
2025-05-07 11:59:27.139 [] [main] INFO  UserController - User with id 1 retrieved successfully
2025-05-07 11:59:27.139 [] [main] TRACE UserController - Exiting getUserById method in UserController class
2025-05-07 11:59:27.141 [] [main] TRACE UserController - Entering updateCurrentUser method in UserController class
2025-05-07 11:59:27.142 [] [main] INFO  UserController - Updating current user with username: testUser
2025-05-07 11:59:27.142 [] [main] INFO  UserController - Current user updated successfully
2025-05-07 11:59:27.142 [] [main] TRACE UserController - Exiting updateCurrentUser method in UserController class
